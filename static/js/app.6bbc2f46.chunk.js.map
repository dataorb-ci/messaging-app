{"version":3,"sources":["D2App/components/App/App.module.css","D2App/constants/development.js","D2App/utils/helpers.js","D2App/utils/createRecipientSearchQuery.js","D2App/api/api.js","D2App/constants/actions.js","D2App/constants/messageTypes.js","D2App/reducers/messageReducer.js","D2App/store.js","D2App/styles/theme.js","D2App/locales/index.js","D2App/actions/index.js","D2App/components/Common/CustomSnackBar.js","D2App/utils/history.js","D2App/styles/style.js","D2App/constants/extendedChoices.js","D2App/components/Common/DialogWithReduxState.js","D2App/components/Common/SuggestionField.js","D2App/components/Common/AssignToDialog.js","D2App/components/Common/ToolbarExtendedChoicePicker.js","D2App/components/Common/Toolbar.js","D2App/components/List/ListItemHeader.js","D2App/components/Common/ExtendedChoiceLabel.js","D2App/components/List/MessageConversationListItem.js","D2App/components/List/MessageConversationList.js","D2App/components/List/MessageTypeItem.js","D2App/components/List/SidebarList.js","D2App/components/Attachments/Attachments.js","D2App/components/Attachments/AttachmentUploadButton.js","D2App/components/MessageConversation/CreateMessage.js","D2App/styles/messageConversationStyles.js","D2App/components/MessageConversation/Message.js","D2App/components/MessageConversation/ReplyCard.js","D2App/components/MessageConversation/MessageConversation.js","D2App/components/MessagingCenter/MessagingCenter.js","D2App/components/App/Routes.js","D2App/components/App/App.js","D2App/components/App/AppWrapper.js"],"names":["module","exports","fontFamily","NEUTRAL","POSITIVE","NEGATIVE","findIndexOfId","list","id","len","length","index","debounce","fn","delay","timer","context","this","args","arguments","clearTimeout","setTimeout","apply","supportsAttachments","dhis2CoreVersion","createOrganisationUnitQuery","searchValue","resource","params","fields","pageSize","filter","createUserGroupQuery","initialMessageConversationFields","messageConversationFields","engine","getMessageConversations","async","messageType","page","messageFilter","status","priority","assignedToMeFilter","markedForFollowUpFilter","unreadFilter","currentUser","push","query","order","queryString","messageConversations","updateMessageConversationAssignee","messageConversationId","value","mutation","type","userId","mutate","searchRecipients","searchOnlyUsers","searchOnlyFeedbackRecipients","feedbackRecipientsId","_results$users","_results$organisation","_results$userGroups","userQuery","supportsUserLookupEndPoint","createUserQuery","users","organisationUnits","userGroups","createRecipientSearchQuery","results","addRecipients","data","SET_CURRENT_USER","SET_CURRENT_USER_SUCCESS","SET_CURRENT_USER_ERROR","LOAD_MESSAGE_CONVERSATIONS","MESSAGE_CONVERSATIONS_LOAD_SUCCESS","MESSAGE_CONVERSATIONS_DELETE_SUCCESS","MESSAGE_CONVERSATIONS_DELETE_ERROR","MESSAGE_CONVERSATION_UPDATE_SUCCESS","MESSAGE_CONVERSATION_UPDATE_ERROR","SEND_MESSAGE_SUCCESS","SEND_MESSAGE_ERROR","SET_FILTER","DISPLAY_SNACK_MESSAGE","CLEAR_SNACK_MESSAGE","SET_CHECKED","SET_ALL_CHECKED","CLEAR_CHECKED","SET_SELECTED_MESSAGE_TYPE","CLEAR_SELECTED_MESSAGE_CONVERSATION","SET_SELECTED_MESSAGE_CONVERSATION","SET_SELECTED_MESSAGE_CONVERSATION_SUCCESS","UPDATE_INPUT_FIELDS","SET_IN_FEEDBACK_RECIPIENT_GROUP","SET_DISPLAY_TIME_DIFF_SUCCESS","ADD_RECIPIENT_BY_ID_SUCCESS","ADD_ATTACHMENT","ADD_ATTACHMENT_SUCCESS","ADD_ATTACHMENT_ERROR","REMOVE_ATTACHMENT","CLEAR_ATTACHMENTS","CANCEL_ATTACHMENT","SET_DHIS2_CORE_VERSION","messageTypes","displayName","i18n","t","unread","loaded","loading","total","initialState","error","authorities","selectedMessageType","undefined","selectedMessageConversation","settingSelectedMessageConversation","checkedIds","statusFilter","priorityFilter","isInFeedbackRecipientGroup","displayTimeDiff","subject","input","recipients","attachments","snackMessage","onSnackActionClick","onSnackRequestClose","snackType","messageReducer","state","action","stateMessageTypes","oldAttachments","actions","payload","replaceMessageType","find","pager","nrOfUnread","splice","setSelectedMessageType","message","identifier","log","messageConversation","selectedValue","element","messageConversationIds","messageTypeId","selectedMessageConversations","filterType","loadingMessageType","loadMore","authorized","map","attachment","name","contentLength","attachmentId","concat","size","attachmentName","middlewares","ReduxThunk","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","reducer","combineReducers","messaging","createStore","applyMiddleware","getMuiTheme","palette","negative","pinkA200","blue50","primary1Color","primary2Color","blue100","primary3Color","blue300","primary4Color","blue500","accent1Color","grey50","accent2Color","grey100","accent3Color","grey300","accent4Color","grey500","followUp","orange500","darkGray","grey700","superDarkGray","grey900","textColor","darkBlack","alternateTextColor","white","canvasColor","borderColor","clockCircleColor","fade","shadowColor","fullBlack","namespace","addResources","arTranslations","ar_IQTranslations","bnTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","es_419Translations","frTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","nlTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","roTranslations","ruTranslations","siTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uz_CyrlTranslations","uz_LatnTranslations","uz_UZ_CyrlTranslations","uz_UZ_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","createAction","setSelectedMessageConversation","dispatch","result","api","loadMessageConversations","getState","promises","i","promise","then","Promise","all","reduce","accumulated","r","markMessageConversations","mode","markedConversations","markedReadConversations","markedUnreadConversations","addAttachment","domain","file","response","fileResource","clearCheckedIds","clearSelectedMessageConversation","displaySnackMessage","setFilter","updateInputFields","clearAttachments","removeAttachment","cancelAttachment","contentColorStyle","theme","CustomSnackBar","Component","constructor","props","obj","key","super","clearSnackMessage","setState","show","Object","defineProperty","enumerable","configurable","writable","componentDidUpdate","_prevProps","prevState","render","React","createElement","Snackbar","open","autoHideDuration","onRequestClose","closeMessage","onActionClick","contentStyle","color","style","pointerEvents","whiteSpace","bodyStyle","maxWidth","connect","pure","createHashHistory","messagePanelContainer","overflowY","overflowX","borderRightWidth","borderRightColor","height","subheader","paddingLeft","fontSize","extendedChoices","STATUS","primaryText","PRIORITY","DialogWithReduxState","ReactReduxContext","Consumer","ctx","Dialog","Provider","store","children","_defineProperty","SuggestionField","searchResult","lastSearch","errorText","search","bind","chip","onSuggestionClick","wipeInput","debouncedSearch","recipient","updateRecipients","addType","internalSearchResult","searchWarning","inputHeight","ChipInput","marginBottom","disabled","fullWidth","openOnFocus","searchText","floatingLabelText","label","dataSource","dataSourceConfig","text","onUpdateInput","updateInput","onRequestAdd","onRequestDelete","onRemoveChip","AssignToDialog","updateMessageConversations","styles","canvas","width","display","justifyContent","nrSelected","padding","overflow","textOverflow","ToolbarExtendedChoicePicker","getIds","ids","dialogOpen","checkedItems","assignToOpen","multiSelect","actionButtons","Fragment","FlatButton","primary","onClick","toggleDialog","keyboardFocused","deleteMessageConversations","history","displayNumberOfCheckedIds","title","modal","updateMessageConversation","IconButton","tooltip","Delete","MarkUnread","Done","displayExtendedChoices","Assignment","IconMenu","iconButtonElement","MoreVertIcon","anchorOrigin","horizontal","vertical","targetOrigin","MenuItem","Divider","rightIcon","ArrowDropRight","menuItems","elem","Subheader","currentUserId","messageConversationStatus","messageConversationPriority","checkedOptions","alignItems","backgroundColor","zIndex","checkedOption","minWidth","margin","filterControl","flex","marginRight","rightHandCanvas","ie11Spacer","flexGrow","iconMenu","Toolbar","lastMessageFilter","prevProps","displaySearch","wideview","Paper","icon","CreateMessageIcon","NavigationBack","SelectField","labelStyle","top","selectedMenuItemStyle","floatingLabelStyle","iconStyle","onChange","event","TextField","hintText","menuStyle","Checkbox","checked","alignSelf","ViewFancy","ViewList","toogleWideview","transition","boxSizing","position","boxShadow","borderBottom","checkBox","sender","extendedLabel","MessageConversationListItem","cursor","allChecked","messages","onCheck","setAllChecked","child","notification","subheaderTitle","paddingRight","fontWeight","ExtendedChoiceLabel","showTitle","displayLabel","charAt","toLowerCase","substr","container","flexWrap","flag","fontColor","marginTop","flexBasis","dateFormat","textAlign","read","lastSender","x","today","moment","messageDate","lastMessage","add","containerBackgroundColor","getBackgroundColor","target","innerText","onMouseEnter","onMouseLeave","setChecked","Flag","assignee","diff","from","year","format","NOTIFICATIONS","borderRightStyle","MessageConversationList","messageList","document","getElementById","isBottom","onScroll","el","scrollHeight","scrollTop","outerHeight","Array","isArray","lookup","Set","item","has","dedupeById","indexOf","debouncedOnScroll","ListItemHeader","CircularProgress","MessageTypeItem","setHoverText","setNeutralText","setTextColor","role","flexDirection","marginLeft","Badge","badgeContent","secondary","badgeStyle","borderLeftStyle","borderLeftWidth","borderLeftColor","SidebarList","match","List","Toggle","refreshTimer","toggled","autoRefresh","onToggle","setAutoRefresh","Attachment","dataDirection","downloadAttachment","className","parseFloat","parseInt","toFixed","labelPosition","Download","Clear","LinearProgress","Attachments","createHandleChange","files","AttachmentUploadButton","containerElement","AttachFile","messageTypeField","CreateMessage","newValue","isMessageFeedback","sendFeedbackMessage","sendMessage","componentDidMount","addRecipientByUserId","messageId","recipientId","discardDisabled","Card","CardText","RadioButton","subjectUpdate","rows","underlineShow","multiLine","inputUpdate","enableAttachments","CardActions","RaisedButton","handleDiscard","user","console","paddingTop","innerCanvas","header","iconButton","subjectSubheader","participantsCanvas","participants","participantAddRow","participantsSuggestionField","participantsAdd","messagesCanvas","messagesInnerCanvas","paddingBottom","cardText","wordBreak","fromFormat","datePlacement","Message","fromTitle","created","internal","placement","Linkify","ReplyCard","internalReply","replyMessage","inputError","discardState","expanded","componentWillUnmount","texFieldUpdate","_extends","assign","source","prototype","hasOwnProperty","call","MessageConversation","userMessages","slice","userMessage","recipientsExpanded","userMessagesLength","tooltipPosition","backToList","participant","Chip","limitSearchArray","AddIcon","filePath","parts","part","replace","join","joinPath","link","baseUrl","apiPath","href","download","split","pop","body","appendChild","click","removeChild","EXTENDED_CHOICES","refreshTimerTotal","refreshTimerInterval","MessagingCenter","intervalId","clearInterval","setInterval","tick","refresh","selectedId","initialMessageConversation","configuration","feedbackRecipients","includes","some","setIsInFeedbackRecipientGroup","setDisplayTimeDiff","drawerOpen","disableLink","MailIcon","serverDate","systemInfo","Routes","Router","Route","exact","path","component","Redirect","to","setCurrentUser","setDhis2CoreVersion","version","serverVersion","useConfig","useEffect","minor","classes","center","cx","AppWrapper","useDataEngine","MuiThemeProvider","muiTheme","App"],"mappings":"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","file":"static/js/app.6bbc2f46.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"center\":\"App_center__1snml\",\"error\":\"App_error__1usCm\"};","export const pageSize = 35;\nexport const fontFamily = 'Roboto, Helvetica, Arial, sans-serif';\nexport const NEUTRAL = 'NEUTRAL';\nexport const POSITIVE = 'POSITIVE';\nexport const NEGATIVE = 'NEGATIVE';","export function dedupeById(list) {\n  if (!Array.isArray(list)) {\n    return undefined;\n  }\n\n  const lookup = new Set();\n  return list.filter(item => {\n    if (lookup.has(item.id)) {\n      return false;\n    }\n\n    lookup.add(item.id);\n    return true;\n  });\n}\nexport function findIndexOfId(list, id) {\n  const len = list.length;\n\n  for (let index = 0; index < len; index++) {\n    if (list[index].id === id) {\n      return index;\n    }\n  }\n\n  return undefined;\n}\nexport function debounce(fn, delay) {\n  let timer = null;\n  return function () {\n    const context = this;\n    const args = arguments;\n    clearTimeout(timer);\n    timer = setTimeout(function () {\n      fn.apply(context, args);\n    }, delay);\n  };\n}\nexport function supportsAttachments(dhis2CoreVersion) {\n  return dhis2CoreVersion > 30;\n}\nexport function supportsUserLookupEndPoint(dhis2CoreVersion) {\n  return dhis2CoreVersion > 34;\n}","import { supportsUserLookupEndPoint } from './helpers.js';\nconst MAX_RECIPIENT = 10;\n\nfunction createUserQuery({\n  searchValue,\n  searchOnlyFeedbackRecipients,\n  feedbackRecipientsId,\n  dhis2CoreVersion\n}) {\n  if (supportsUserLookupEndPoint(dhis2CoreVersion)) {\n    // version >= v2.35\n    return {\n      resource: searchOnlyFeedbackRecipients ? 'userLookup/feedbackRecipients' : 'userLookup',\n      params: {\n        query: searchValue\n      }\n    };\n  } else {\n    // version < 2.35\n    const filter = [`displayName:token:${searchValue}`];\n\n    if (searchOnlyFeedbackRecipients) {\n      filter.push(`userGroups.id:eq:${feedbackRecipientsId}`);\n    }\n\n    return {\n      resource: 'users',\n      params: {\n        filter,\n        pageSize: MAX_RECIPIENT\n      }\n    };\n  }\n}\n\nfunction createOrganisationUnitQuery(searchValue) {\n  return {\n    resource: 'organisationUnits',\n    params: {\n      fields: ['id', 'displayName'],\n      pageSize: MAX_RECIPIENT,\n      filter: [`displayName:token:${searchValue}`, 'users:gte:1']\n    }\n  };\n}\n\nfunction createUserGroupQuery(searchValue) {\n  return {\n    resource: 'userGroups',\n    params: {\n      fields: 'id, displayName',\n      pageSize: MAX_RECIPIENT,\n      filter: [`displayName:token:${searchValue}`]\n    }\n  };\n}\n\nexport default function createRecipientSearchQuery({\n  searchValue,\n  searchOnlyUsers,\n  searchOnlyFeedbackRecipients,\n  feedbackRecipientsId,\n  dhis2CoreVersion\n}) {\n  const userQuery = createUserQuery({\n    searchValue,\n    searchOnlyFeedbackRecipients,\n    feedbackRecipientsId,\n    dhis2CoreVersion\n  });\n  return searchOnlyUsers ? {\n    users: userQuery\n  } : {\n    users: userQuery,\n    organisationUnits: createOrganisationUnitQuery(searchValue),\n    userGroups: createUserGroupQuery(searchValue)\n  };\n}","import { pageSize } from '../constants/development.js';\nimport createRecipientSearchQuery from '../utils/createRecipientSearchQuery.js';\nconst initialMessageConversationFields = ['id', 'displayName', 'subject', 'messageType', 'lastSender[id, displayName]', 'assignee[id, displayName]', 'status', 'priority', 'lastUpdated', 'read', 'lastMessage', 'followUp'];\nconst messageConversationFields = ['*', 'assignee[id, displayName]', 'messages[*,sender[id,displayName]', 'attachments[id, name, contentLength]]', 'userMessages[user[id, displayName]]'];\nconst order = 'lastMessage:desc'; // The rest of the code in this module will expect that\n// engine has been set and can use it safely\n\nlet engine = null;\nexport const setEngine = engineInstance => {\n  engine = engineInstance;\n};\nexport const getCurrentUser = () => engine.query({\n  currentUser: {\n    resource: 'me',\n    params: {\n      fields: ['id', 'authorities', 'userGroups[id]']\n    }\n  }\n});\nexport const getMessageConversations = async ({\n  messageType,\n  page,\n  messageFilter,\n  status,\n  priority,\n  assignedToMeFilter,\n  markedForFollowUpFilter,\n  unreadFilter,\n  currentUser\n}) => {\n  const filter = [`messageType:eq:${messageType}`];\n\n  if (status) {\n    filter.push(`status:eq:${status}`);\n  }\n\n  if (priority) {\n    filter.push(`priority:eq:${priority}`);\n  }\n\n  if (markedForFollowUpFilter) {\n    filter.push('followUp:eq:true');\n  }\n\n  if (unreadFilter) {\n    filter.push('read:eq:false');\n  }\n\n  if (assignedToMeFilter) {\n    filter.push(`assignee.id:eq:${currentUser.id}`);\n  }\n\n  const query = {\n    resource: 'messageConversations',\n    params: {\n      filter,\n      pageSize,\n      page,\n      fields: initialMessageConversationFields,\n      order,\n      queryString: messageFilter\n    }\n  };\n  const {\n    messageConversations\n  } = await engine.query({\n    messageConversations: query\n  });\n  return messageConversations;\n};\nexport const getMessageConversation = async ({\n  id\n}) => {\n  const {\n    messageConversation\n  } = await engine.query({\n    messageConversation: {\n      resource: 'messageConversations',\n      id,\n      params: {\n        fields: messageConversationFields\n      }\n    }\n  });\n  return messageConversation;\n};\nexport const getServerDate = async () => {\n  const {\n    systemInfo\n  } = await engine.query({\n    systemInfo: {\n      resource: 'system/info'\n    }\n  });\n  return systemInfo.serverDate;\n};\nexport const updateMessageConversationStatus = (messageConversationId, value) => engine.mutate({\n  resource: `messageConversations/${messageConversationId}/status`,\n  type: 'create',\n  params: {\n    messageConversationStatus: value\n  }\n});\nexport const updateMessageConversationPriority = (messageConversationId, value) => engine.mutate({\n  resource: `messageConversations/${messageConversationId}/priority`,\n  type: 'create',\n  params: {\n    messageConversationPriority: value\n  }\n});\nexport const updateMessageConversationAssignee = async (messageConversationId, value) => {\n  const mutation = value ? {\n    resource: `messageConversations/${messageConversationId}/assign`,\n    type: 'create',\n    params: {\n      userId: value\n    }\n  } : {\n    resource: `messageConversations`,\n    id: `${messageConversationId}/assign`,\n    type: 'delete'\n  };\n  return await engine.mutate(mutation);\n};\nexport const updateMessageConversationFollowup = (messageConversationIds, value) => engine.mutate({\n  resource: `messageConversations/${value ? 'followup' : 'unfollowup'}`,\n  type: 'create',\n  data: messageConversationIds\n});\nexport const getNrOfUnread = async messageType => {\n  const {\n    messageConversations\n  } = await engine.query({\n    messageConversations: {\n      resource: 'messageConversations',\n      params: {\n        fields: ['read'],\n        filter: ['read:eq:false', `messageType:eq:${messageType}`],\n        pageSize: 1\n      }\n    }\n  });\n  return messageConversations.pager.total;\n};\nexport const sendMessage = ({\n  subject,\n  users,\n  userGroups,\n  organisationUnits,\n  text,\n  attachments\n}) => engine.mutate({\n  resource: 'messageConversations',\n  type: 'create',\n  data: {\n    subject,\n    users,\n    userGroups,\n    organisationUnits,\n    text,\n    attachments\n  }\n});\nexport const sendFeedbackMessage = (subject, text) => engine.mutate({\n  resource: 'messageConversations/feedback',\n  type: 'create',\n  params: {\n    subject\n  },\n  data: text\n});\nexport const replyMessage = async ({\n  message,\n  internalReply,\n  attachments,\n  id\n}) => {\n  const params = {\n    internal: internalReply\n  };\n\n  if (attachments.length > 0) {\n    params.attachments = attachments;\n  }\n\n  return await engine.mutate({\n    resource: `messageConversations/${id}`,\n    type: 'create',\n    params,\n    data: message\n  });\n};\nexport const deleteMessageConversation = (messageConversationId, currentUserId) => engine.mutate({\n  resource: `messageConversations/${messageConversationId}/${currentUserId}`,\n  type: 'delete'\n});\nexport const markRead = markedReadConversations => engine.mutate({\n  resource: 'messageConversations/read',\n  type: 'create',\n  data: markedReadConversations\n});\nexport const markUnread = markedUnreadConversations => engine.mutate({\n  resource: 'messageConversations/unread',\n  type: 'create',\n  data: markedUnreadConversations\n});\nexport const isInFeedbackRecipientGroup = async currentUser => {\n  const {\n    configuration: {\n      feedbackRecipients\n    }\n  } = await engine.query({\n    configuration: {\n      resource: 'configuration'\n    }\n  });\n  const authorized = currentUser.authorities.includes('ALL') || currentUser.userGroups.some(({\n    id\n  }) => id === feedbackRecipients.id);\n  const feedbackRecipientsId = feedbackRecipients.id;\n  return {\n    authorized,\n    feedbackRecipientsId\n  };\n};\nexport const searchRecipients = async ({\n  searchValue,\n  searchOnlyUsers,\n  searchOnlyFeedbackRecipients,\n  feedbackRecipientsId,\n  dhis2CoreVersion\n}) => {\n  var _results$users, _results$organisation, _results$userGroups;\n\n  const query = createRecipientSearchQuery({\n    searchValue,\n    searchOnlyUsers,\n    searchOnlyFeedbackRecipients,\n    feedbackRecipientsId,\n    dhis2CoreVersion\n  });\n  const results = await engine.query(query);\n  return {\n    users: (_results$users = results.users) === null || _results$users === void 0 ? void 0 : _results$users.users,\n    organisationUnits: results === null || results === void 0 ? void 0 : (_results$organisation = results.organisationUnits) === null || _results$organisation === void 0 ? void 0 : _results$organisation.organisationUnits,\n    userGroups: results === null || results === void 0 ? void 0 : (_results$userGroups = results.userGroups) === null || _results$userGroups === void 0 ? void 0 : _results$userGroups.userGroups\n  };\n};\nexport const addRecipients = ({\n  users,\n  userGroups,\n  organisationUnits,\n  messageConversationId\n}) => engine.mutate({\n  resource: `messageConversations/${messageConversationId}/recipients`,\n  type: 'create',\n  data: {\n    users,\n    userGroups,\n    organisationUnits\n  }\n});\nexport const getUserById = async id => {\n  const {\n    user\n  } = await engine.query({\n    user: {\n      resource: 'users',\n      id,\n      params: {\n        fields: 'id,displayName'\n      }\n    }\n  });\n  return { ...user,\n    type: 'user'\n  };\n};\nexport const addAttachment = attachment => engine.mutate({\n  resource: 'fileResources',\n  type: 'create',\n  params: {\n    domain: 'MESSAGE_ATTACHMENT'\n  },\n  data: {\n    file: attachment\n  }\n});\n\nconst joinPath = (...parts) => {\n  const realParts = parts.filter(part => !!part);\n  return realParts.map(part => part.replace(/^\\/+|\\/+$/g, '')).join('/');\n};\n\nexport const downloadAttachment = (messageConversationId, messageId, attachmentId) => {\n  const filePath = joinPath(engine.link.baseUrl, engine.link.apiPath, 'messageConversations', messageConversationId, messageId, 'attachments', attachmentId);\n  const link = document.createElement('a');\n  link.href = filePath;\n  link.download = filePath.split('/').pop();\n  link.target = '_blank';\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n};","export const SET_CURRENT_USER = 'SET_CURRENT_USER';\nexport const SET_CURRENT_USER_SUCCESS = 'SET_CURRENT_USER_SUCCESS';\nexport const SET_CURRENT_USER_ERROR = 'SET_CURRENT_USER_ERROR';\nexport const LOAD_MESSAGE_CONVERSATIONS = 'LOAD_MESSAGE_CONVERSATIONS';\nexport const LOAD_MORE_MESSAGE_CONVERSATIONS = 'LOAD_MORE_MESSAGE_CONVERSATIONS';\nexport const MESSAGE_CONVERSATIONS_LOAD_SUCCESS = 'MESSAGE_CONVERSATIONS_LOAD_SUCCESS';\nexport const MESSAGE_CONVERSATIONS_LOAD_ERROR = 'MESSAGE_CONVERSATIONS_LOAD_ERROR';\nexport const DELETE_MESSAGE_CONVERSATIONS = 'DELETE_MESSAGE_CONVERSATIONS';\nexport const MESSAGE_CONVERSATIONS_DELETE_SUCCESS = 'MESSAGE_CONVERSATIONS_DELETE_SUCCESS';\nexport const MESSAGE_CONVERSATIONS_DELETE_ERROR = 'MESSAGE_CONVERSATIONS_DELETE_ERROR';\nexport const UPDATE_MESSAGE_CONVERSATIONS = 'UPDATE_MESSAGE_CONVERSATIONS';\nexport const MESSAGE_CONVERSATION_UPDATE_SUCCESS = 'MESSAGE_CONVERSATION_UPDATE_SUCCESS';\nexport const MESSAGE_CONVERSATION_UPDATE_ERROR = 'MESSAGE_CONVERSATION_UPDATE_ERROR';\nexport const MARK_MESSAGE_CONVERSATIONS = 'MARK_MESSAGE_CONVERSATIONS';\nexport const MARK_MESSAGE_CONVERSATIONS_SUCCESS = 'MARK_MESSAGE_CONVERSATIONS_SUCCESS';\nexport const MARK_MESSAGE_CONVERSATIONS_ERROR = 'MARK_MESSAGE_CONVERSATIONS_ERROR';\nexport const SEND_MESSAGE = 'SEND_MESSAGE';\nexport const SEND_MESSAGE_SUCCESS = 'SEND_MESSAGE_SUCCESS';\nexport const SEND_MESSAGE_ERROR = 'SEND_MESSAGE_ERROR';\nexport const SEND_FEEDBACK_MESSAGE = 'SEND_FEEDBACK_MESSAGE';\nexport const REPLY_MESSAGE = 'REPLY_MESSAGE';\nexport const REPLY_MESSAGE_SUCCESS = 'REPLY_MESSAGE_SUCCESS';\nexport const REPLY_MESSAGE_ERROR = 'REPLY_MESSAGE_ERROR';\nexport const SET_FILTER = 'SET_FILTER';\nexport const DISPLAY_SNACK_MESSAGE = 'DISPLAY_SNACK_MESSAGE;';\nexport const CLEAR_SNACK_MESSAGE = 'CLEAR_SNACK_MESSAGE';\nexport const SET_CHECKED = 'SET_CHECKED';\nexport const SET_ALL_CHECKED = 'SET_ALL_CHECKED';\nexport const CLEAR_CHECKED = 'CLEAR_CHECKED';\nexport const SET_SELECTED_MESSAGE_TYPE = 'SET_SELECTED_MESSAGE_TYPE';\nexport const CLEAR_SELECTED_MESSAGE_CONVERSATION = 'CLEAR_SELECTED_MESSAGE_CONVERSATION';\nexport const SET_SELECTED_MESSAGE_CONVERSATION = 'SET_SELECTED_MESSAGE_CONVERSATION';\nexport const SET_SELECTED_MESSAGE_CONVERSATION_SUCCESS = 'SET_SELECTED_MESSAGE_CONVERSATION_SUCCESS';\nexport const SET_SELECTED_MESSAGE_CONVERSATION_ERROR = 'SET_SELECTED_MESSAGE_CONVERSATION_ERROR';\nexport const UPDATE_INPUT_FIELDS = 'UPDATE_INPUT_FIELDS';\nexport const SET_IN_FEEDBACK_RECIPIENT_GROUP = 'SET_IN_FEEDBACK_RECIPIENT_GROUP';\nexport const SET_DISPLAY_TIME_DIFF = 'SET_DISPLAY_TIME_DIFF';\nexport const SET_DISPLAY_TIME_DIFF_SUCCESS = 'SET_DISPLAY_TIME_DIFF_SUCCESS';\nexport const SET_DISPLAY_TIME_DIFF_ERROR = 'SET_DISPLAY_TIME_DIFF_ERROR';\n/* Recipient actions */\n\nexport const RECIPIENT_SEARCH = 'RECIPIENT_SEARCH';\nexport const RECIPIENT_SEARCH_SUCCESS = 'RECIPIENT_SEARCH_SUCCESS';\nexport const RECIPIENT_SEARCH_ERROR = 'RECIPIENT_SEARCH_ERROR';\nexport const ADD_RECIPIENTS = 'ADD_RECIPIENTS';\nexport const ADD_RECIPIENTS_SUCCESS = 'ADD_RECIPIENTS_SUCCESS';\nexport const ADD_RECIPIENTS_ERROR = 'ADD_RECIPIENTS_ERROR';\nexport const ADD_RECIPIENT_BY_ID_SUCCESS = 'ADD_RECIPIENT_BY_ID_SUCCESS';\n/* Attachments */\n\nexport const ADD_ATTACHMENT = 'ADD_ATTACHMENT';\nexport const ADD_ATTACHMENT_SUCCESS = 'ADD_ATTACHMENT_SUCCESS';\nexport const ADD_ATTACHMENT_ERROR = 'ADD_ATTACHMENT_ERROR';\nexport const DOWNLOAD_ATTACHMENT = 'DOWNLOAD_ATTACHMENT';\nexport const DOWNLOAD_ATTACHMENT_SUCCESS = 'DOWNLOAD_ATTACHMENT_SUCCESS';\nexport const DOWNLOAD_ATTACHMENT_ERROR = 'DOWNLOAD_ATTACHMENT_ERROR';\nexport const REMOVE_ATTACHMENT = 'REMOVE_ATTACHMENT';\nexport const CLEAR_ATTACHMENTS = 'CLEAR_ATTACHMENTS';\nexport const CANCEL_ATTACHMENT = 'CANCEL_ATTACHMENT';\n/* DHIS2 CORE VERSION */\n\nexport const SET_DHIS2_CORE_VERSION = 'SET_DHIS2_CORE_VERSION';","import i18n from '@dhis2/d2-i18n';\nconst messageTypes = [{\n  id: 'PRIVATE',\n  displayName: i18n.t('Inbox'),\n  unread: 0,\n  loaded: 0,\n  loading: false,\n  total: 0,\n  page: 1\n}, {\n  id: 'VALIDATION_RESULT',\n  displayName: i18n.t('Validation'),\n  unread: 0,\n  loaded: 0,\n  loading: false,\n  total: 0,\n  page: 1\n}, {\n  id: 'TICKET',\n  displayName: i18n.t('Ticket'),\n  unread: 0,\n  loaded: 0,\n  loading: false,\n  total: 0,\n  page: 1\n}, {\n  id: 'SYSTEM',\n  displayName: i18n.t('System'),\n  unread: 0,\n  loaded: 0,\n  loading: false,\n  total: 0,\n  page: 1\n}];\nexport default messageTypes;","import i18n from '@dhis2/d2-i18n';\nimport log from 'loglevel';\nimport * as actions from '../constants/actions.js';\nimport { POSITIVE, NEGATIVE, NEUTRAL } from '../constants/development.js';\nimport messageTypes from '../constants/messageTypes.js';\nimport { findIndexOfId } from '../utils/helpers.js';\nexport const initialState = {\n  currentUser: {\n    loading: true,\n    error: null,\n    id: null,\n    authorities: null,\n    userGroups: null\n  },\n  // Message conversation\n  messageConversations: {},\n  messageTypes,\n  selectedMessageType: undefined,\n  selectedMessageConversation: undefined,\n  settingSelectedMessageConversation: false,\n  checkedIds: [],\n  messageFilter: undefined,\n  statusFilter: undefined,\n  priorityFilter: undefined,\n  assignedToMeFilter: false,\n  markedForFollowUpFilter: false,\n  unreadFilter: false,\n  isInFeedbackRecipientGroup: false,\n  feedbackRecipientsId: undefined,\n  displayTimeDiff: 0,\n  // Input for create and reply\n  subject: '',\n  input: '',\n  recipients: [],\n  // Attachments\n  attachments: [],\n  // Snackbar\n  snackMessage: '',\n  onSnackActionClick: undefined,\n  onSnackRequestClose: undefined,\n  snackType: NEUTRAL\n};\n\nfunction messageReducer(state = initialState, action) {\n  const stateMessageTypes = state.messageTypes;\n  const oldAttachments = state.attachments;\n\n  switch (action.type) {\n    case actions.SET_CURRENT_USER:\n      return { ...state,\n        currentUser: {\n          loading: true,\n          error: null,\n          id: null,\n          authorities: null,\n          userGroups: null\n        }\n      };\n\n    case actions.SET_CURRENT_USER_SUCCESS:\n      return { ...state,\n        currentUser: {\n          loading: false,\n          error: null,\n          id: action.payload.id,\n          authorities: action.payload.authorities,\n          userGroups: action.payload.userGroups\n        }\n      };\n\n    case actions.SET_CURRENT_USER_ERROR:\n      return { ...state,\n        currentUser: {\n          loading: false,\n          error: action.payload,\n          id: null,\n          authorities: null,\n          userGroups: null\n        }\n      };\n\n    case actions.SET_DISPLAY_TIME_DIFF_SUCCESS:\n      return { ...state,\n        displayTimeDiff: action.payload\n      };\n\n    case actions.MESSAGE_CONVERSATIONS_LOAD_SUCCESS:\n      {\n        const replaceMessageType = stateMessageTypes.find(type => type.id === action.payload.messageType.id);\n        replaceMessageType.loaded = action.payload.messageConversations.length;\n        replaceMessageType.total = action.payload.pager.total;\n        replaceMessageType.unread = action.payload.nrOfUnread;\n        replaceMessageType.page = action.payload.pager.page;\n        replaceMessageType.loading = false;\n        messageTypes.splice([findIndexOfId(stateMessageTypes, replaceMessageType.id)], 1, replaceMessageType);\n        const setSelectedMessageType = action.payload.selectedMessageType === replaceMessageType.id && (action.payload.selectedMessageType === state.selectedMessageType || state.selectedMessageType === undefined);\n        return { ...state,\n          messageTypes,\n          messageConversations: { ...state.messageConversations,\n            [replaceMessageType.id]: action.payload.messageConversations\n          },\n          selectedMessageType: setSelectedMessageType ? replaceMessageType : state.selectedMessageType\n        };\n      }\n\n    case actions.MESSAGE_CONVERSATION_UPDATE_ERROR:\n      return { ...state,\n        snackMessage: action.payload.error.message,\n        snackType: NEGATIVE\n      };\n\n    case actions.MESSAGE_CONVERSATION_UPDATE_SUCCESS:\n      {\n        let snackMessage = '';\n\n        switch (action.payload.identifier) {\n          case 'STATUS':\n            snackMessage = i18n.t('Successfully updated status');\n            break;\n\n          case 'PRIORITY':\n            snackMessage = i18n.t('Successfully updated priority');\n            break;\n\n          case 'ASSIGNEE':\n            snackMessage = i18n.t('Successfully updated assignee');\n            break;\n\n          case 'FOLLOW_UP':\n            snackMessage = i18n.t('Successfully changed followup');\n            break;\n\n          default:\n            log.error('Unexpected identifier for updateMessageConversations success');\n            break;\n        }\n\n        return { ...state,\n          snackMessage,\n          snackType: POSITIVE\n        };\n      }\n\n    case actions.SEND_MESSAGE_ERROR:\n      return { ...state,\n        snackMessage: action.payload.error.message,\n        snackType: NEGATIVE\n      };\n\n    case actions.MESSAGE_CONVERSATIONS_DELETE_ERROR:\n      return { ...state,\n        snackMessage: action.payload.error.message,\n        snackType: NEGATIVE\n      };\n\n    case actions.MESSAGE_CONVERSATIONS_DELETE_SUCCESS:\n      return { ...state,\n        snackMessage: i18n.t('Successfully deleted message conversation(s)'),\n        snackType: POSITIVE\n      };\n\n    case actions.DISPLAY_SNACK_MESSAGE:\n      return { ...state,\n        snackMessage: action.payload.message,\n        snackType: action.payload.snackType,\n        onSnackActionClick: action.payload.onSnackActionClick,\n        onSnackRequestClose: action.payload.onSnackRequestClose\n      };\n\n    case actions.CLEAR_SNACK_MESSAGE:\n      return { ...state,\n        snackMessage: '',\n        snackType: NEUTRAL\n      };\n\n    case actions.SET_CHECKED:\n      {\n        const messageConversation = action.payload.messageConversation;\n        let checkedIds = state.checkedIds;\n\n        if (action.payload.selectedValue) {\n          checkedIds.push(messageConversation);\n        } else {\n          checkedIds = checkedIds.filter(element => element.id !== messageConversation.id);\n        }\n\n        return { ...state,\n          checkedIds\n        };\n      }\n\n    case actions.SET_ALL_CHECKED:\n      return { ...state,\n        checkedIds: action.payload.messageConversationIds\n      };\n\n    case actions.CLEAR_CHECKED:\n      return { ...state,\n        checkedIds: []\n      };\n\n    case actions.SET_SELECTED_MESSAGE_CONVERSATION_SUCCESS:\n      return { ...state,\n        selectedMessageConversation: action.payload.messageConversation,\n        settingSelectedMessageConversation: false\n      };\n\n    case actions.SET_SELECTED_MESSAGE_CONVERSATION:\n      return { ...state,\n        settingSelectedMessageConversation: true\n      };\n\n    case actions.CLEAR_SELECTED_MESSAGE_CONVERSATION:\n      return { ...state,\n        selectedMessageConversation: undefined\n      };\n\n    case actions.SET_SELECTED_MESSAGE_TYPE:\n      return { ...state,\n        checkedIds: [],\n        selectedMessageType: stateMessageTypes.find(type => type.id === action.payload.messageTypeId),\n        selectedMessageConversations: state.messageConversations[action.payload.messageTypeId],\n        selectedMessageConversation: undefined\n      };\n\n    case actions.UPDATE_INPUT_FIELDS:\n      return { ...state,\n        subject: action.payload.subject,\n        input: action.payload.input,\n        recipients: action.payload.recipients\n      };\n\n    case actions.ADD_RECIPIENT_BY_ID_SUCCESS:\n      return { ...state,\n        recipients: [...state.recipients, action.payload]\n      };\n\n    case actions.SET_FILTER:\n      return { ...state,\n        messageFilter: action.payload.filterType === 'MESSAGE' ? action.payload.filter : state.messageFilter,\n        statusFilter: action.payload.filterType === 'STATUS' ? action.payload.filter : state.statusFilter,\n        priorityFilter: action.payload.filterType === 'PRIORITY' ? action.payload.filter : state.priorityFilter,\n        assignedToMeFilter: action.payload.filterType === 'ASSIGNED_TO_ME' ? action.payload.filter : state.assignedToMeFilter,\n        markedForFollowUpFilter: action.payload.filterType === 'MARKED_FOR_FOLLOWUP' ? action.payload.filter : state.markedForFollowUpFilter,\n        unreadFilter: action.payload.filterType === 'UNREAD' ? action.payload.filter : state.unreadFilter\n      };\n\n    case actions.LOAD_MESSAGE_CONVERSATIONS:\n      {\n        const loadingMessageType = action.payload.messageType;\n        loadingMessageType.loading = true;\n\n        if (action.payload.loadMore) {\n          loadingMessageType.page++;\n        }\n\n        messageTypes[findIndexOfId(messageTypes, loadingMessageType.id)] = loadingMessageType; // TODO: This can probably be removed because action.payload.messageType === state.selectedMessageType\n\n        const selectedMessageType = state.selectedMessageType;\n\n        if (selectedMessageType) {\n          selectedMessageType.loading = true;\n\n          if (action.payload.loadMore) {\n            selectedMessageType.page++;\n          }\n        }\n\n        return { ...state,\n          messageTypes,\n          selectedMessageType\n        };\n      }\n\n    case actions.SET_IN_FEEDBACK_RECIPIENT_GROUP:\n      return { ...state,\n        isInFeedbackRecipientGroup: action.payload.isInFeedbackRecipientGroup.authorized,\n        feedbackRecipientsId: action.payload.isInFeedbackRecipientGroup.feedbackRecipientsId\n      };\n\n    case actions.ADD_ATTACHMENT_SUCCESS:\n      return { ...state,\n        attachments: state.attachments.map(attachment => attachment.name === action.payload.name ? {\n          id: action.payload.id,\n          name: attachment.name,\n          contentLength: attachment.contentLength,\n          loading: false\n        } : attachment)\n      };\n\n    case actions.ADD_ATTACHMENT_ERROR:\n      return { ...state,\n        attachments: oldAttachments.filter(attachment => attachment.id !== action.payload.attachmentId),\n        snackMessage: action.payload.error.message,\n        snackType: NEGATIVE\n      };\n\n    case actions.ADD_ATTACHMENT:\n      return { ...state,\n        attachments: state.attachments.concat({\n          name: action.payload.name,\n          contentLength: action.payload.size,\n          loading: true\n        })\n      };\n\n    case actions.REMOVE_ATTACHMENT:\n      return { ...state,\n        attachments: oldAttachments.filter(attachment => attachment.id !== action.payload.attachmentId)\n      };\n\n    case actions.CANCEL_ATTACHMENT:\n      return { ...state,\n        attachments: oldAttachments.filter(attachment => attachment.name !== action.payload.attachmentName)\n      };\n\n    case actions.CLEAR_ATTACHMENTS:\n      return { ...state,\n        attachments: []\n      };\n\n    case actions.SET_DHIS2_CORE_VERSION:\n      return { ...state,\n        dhis2CoreVersion: action.payload\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport default messageReducer;","import { createStore, applyMiddleware, combineReducers, compose } from 'redux';\nimport ReduxThunk from 'redux-thunk';\nimport messageReducer from './reducers/messageReducer.js';\nconst middlewares = [ReduxThunk];\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst reducer = combineReducers({\n  messaging: messageReducer\n});\nexport default createStore(reducer, composeEnhancers(applyMiddleware(...middlewares)));","import { blue50, blue100, blue300, blue500, pinkA200, grey50, grey100, grey300, grey500, grey700, grey900, orange500, white, darkBlack, fullBlack } from 'material-ui/styles/colors';\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\nimport { fade } from 'material-ui/utils/colorManipulator';\nexport default getMuiTheme({\n  palette: {\n    negative: pinkA200,\n    blue50,\n    primary1Color: '#1D8BF1',\n    primary2Color: blue100,\n    primary3Color: blue300,\n    primary4Color: blue500,\n    accent1Color: grey50,\n    accent2Color: grey100,\n    accent3Color: grey300,\n    accent4Color: grey500,\n    followUp: orange500,\n    darkGray: grey700,\n    superDarkGray: grey900,\n    textColor: darkBlack,\n    alternateTextColor: white,\n    canvasColor: white,\n    borderColor: grey300,\n    clockCircleColor: fade(darkBlack, 0.07),\n    shadowColor: fullBlack\n  }\n});","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport bnTranslations from './bn/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport es_419Translations from './es_419/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport nlTranslations from './nl/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport roTranslations from './ro/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport siTranslations from './si/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport uz_UZ_CyrlTranslations from './uz_UZ_Cyrl/translations.json';\nimport uz_UZ_LatnTranslations from './uz_UZ_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('bn', namespace, bnTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('es_419', namespace, es_419Translations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('nl', namespace, nlTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ro', namespace, roTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('si', namespace, siTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('uz_UZ_Cyrl', namespace, uz_UZ_CyrlTranslations);\ni18n.addResources('uz_UZ_Latn', namespace, uz_UZ_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import log from 'loglevel';\nimport moment from 'moment';\nimport * as api from '../api/api.js';\nimport * as actions from '../constants/actions.js'; // Simple hack to solve negative time difference\n\nconst FUTURE_HACK = 5000;\n\nconst createAction = (type, payload) => ({\n  type,\n  payload\n});\n/******************\n * THUNKS SECTION *\n ******************/\n\n\nexport const setCurrentUser = () => async dispatch => {\n  dispatch(createAction(actions.SET_CURRENT_USER));\n\n  try {\n    const {\n      currentUser\n    } = await api.getCurrentUser();\n    dispatch(createAction(actions.SET_CURRENT_USER_SUCCESS, currentUser));\n  } catch {\n    dispatch(createAction(actions.SET_CURRENT_USER_ERROR, 'Could not load current user'));\n  }\n};\nexport const setDisplayTimeDiff = () => async dispatch => {\n  try {\n    const serverDate = await api.getServerDate();\n    const displayTimeDiff = moment().diff(moment(serverDate)) - FUTURE_HACK;\n    dispatch(createAction(actions.SET_DISPLAY_TIME_DIFF_SUCCESS, displayTimeDiff));\n  } catch (error) {\n    dispatch(createAction(actions.SET_DISPLAY_TIME_DIFF_ERROR, {\n      error\n    }));\n  }\n};\nexport const setSelectedMessageConversation = messageConversation => async dispatch => {\n  dispatch(createAction(actions.SET_SELECTED_MESSAGE_CONVERSATION));\n\n  try {\n    const result = await api.getMessageConversation(messageConversation);\n    dispatch(createAction(actions.SET_SELECTED_MESSAGE_CONVERSATION_SUCCESS, {\n      messageConversation: result\n    }));\n  } catch (error) {\n    dispatch(createAction(actions.SET_SELECTED_MESSAGE_CONVERSATION_ERROR, {\n      error\n    }));\n  }\n};\nexport const updateMessageConversations = ({\n  messageConversationIds,\n  identifier,\n  value,\n  messageType,\n  selectedMessageConversation\n}) => async dispatch => {\n  if (identifier === 'FOLLOW_UP') {\n    try {\n      await api.updateMessageConversationFollowup(messageConversationIds, value);\n      dispatch(createAction(actions.MESSAGE_CONVERSATION_UPDATE_SUCCESS, {\n        messageType: messageType,\n        page: 1,\n        identifier: identifier\n      }));\n      dispatch(loadMessageConversations());\n    } catch (error) {\n      dispatch(createAction(actions.MESSAGE_CONVERSATION_UPDATE_ERROR, {\n        error\n      }));\n    }\n  } else {\n    const promises = messageConversationIds.map(messageConversationId => {\n      let promise;\n\n      switch (identifier) {\n        case 'STATUS':\n          promise = api.updateMessageConversationStatus(messageConversationId, value);\n          break;\n\n        case 'PRIORITY':\n          promise = api.updateMessageConversationPriority(messageConversationId, value);\n          break;\n\n        case 'ASSIGNEE':\n          if (value !== undefined && messageType.id === 'VALIDATION_RESULT') {\n            promise = api.addRecipients({\n              users: value.map(value => ({\n                id: value\n              })),\n              userGroups: [],\n              organisationUnits: [],\n              messageConversationId\n            }).then(() => api.updateMessageConversationAssignee(messageConversationId, value));\n          } else {\n            promise = api.updateMessageConversationAssignee(messageConversationId, value);\n          }\n\n          break;\n\n        default:\n          log.error('Unexpected identifier for updateMessageConversations');\n          break;\n      }\n\n      return promise;\n    });\n\n    try {\n      await Promise.all(promises);\n      dispatch(createAction(actions.MESSAGE_CONVERSATION_UPDATE_SUCCESS, {\n        messageType: messageType,\n        page: 1,\n        identifier: identifier\n      }));\n      dispatch(loadMessageConversations());\n    } catch (error) {\n      dispatch(createAction(actions.MESSAGE_CONVERSATION_UPDATE_ERROR, {\n        error\n      }));\n    }\n  }\n\n  if (selectedMessageConversation) {\n    dispatch(setSelectedMessageConversation(selectedMessageConversation));\n  }\n};\nexport const loadMessageConversations = (messageType, selectedMessageType, loadMore = false) => async (dispatch, getState) => {\n  const promises = [];\n  const state = getState();\n  const {\n    messageFilter,\n    statusFilter: status,\n    priorityFilter: priority,\n    assignedToMeFilter,\n    markedForFollowUpFilter,\n    unreadFilter,\n    currentUser\n  } = state.messaging; // Default fallback values so this action can be called without arguments\n\n  messageType = messageType || state.messaging.selectedMessageType;\n  selectedMessageType = selectedMessageType || state.messaging.selectedMessageType.id;\n  dispatch(createAction(actions.LOAD_MESSAGE_CONVERSATIONS, {\n    messageType,\n    loadMore\n  }));\n\n  try {\n    for (let i = 1; i <= messageType.page; i++) {\n      const promise = api.getMessageConversations({\n        messageType: messageType.id,\n        page: i,\n        messageFilter,\n        status,\n        priority,\n        assignedToMeFilter,\n        markedForFollowUpFilter,\n        unreadFilter,\n        currentUser\n      }).then(result => ({\n        messageConversations: result.messageConversations,\n        pager: result.pager\n      }));\n      promises.push(promise);\n    }\n\n    const result = await Promise.all(promises);\n    const nrOfUnread = await api.getNrOfUnread(messageType.id);\n    const messageConversations = result.reduce((accumulated, r) => accumulated.concat(r.messageConversations), []);\n    dispatch(createAction(actions.MESSAGE_CONVERSATIONS_LOAD_SUCCESS, {\n      messageConversations,\n      pager: result[result.length - 1].pager,\n      messageType,\n      selectedMessageType,\n      nrOfUnread\n    }));\n  } catch (error) {\n    dispatch(createAction(actions.MESSAGE_CONVERSATIONS_LOAD_ERROR, {\n      error\n    }));\n  }\n};\nexport const deleteMessageConversations = (messageConversationIds, messageType) => async (dispatch, getState) => {\n  try {\n    const state = getState();\n    const {\n      currentUser\n    } = state.messaging;\n    const promises = messageConversationIds.map(messageConversationId => api.deleteMessageConversation(messageConversationId, currentUser.id));\n    await Promise.all(promises);\n    dispatch(createAction(actions.MESSAGE_CONVERSATIONS_DELETE_SUCCESS, {\n      messageType: messageType,\n      page: 1\n    }));\n    dispatch(loadMessageConversations());\n  } catch (error) {\n    dispatch(createAction(actions.MESSAGE_CONVERSATIONS_DELETE_ERROR, {\n      error\n    }));\n  }\n};\nexport const sendMessage = ({\n  users,\n  userGroups,\n  organisationUnits,\n  messageType\n}) => async (dispatch, getState) => {\n  try {\n    const {\n      messaging: {\n        subject,\n        input,\n        attachments\n      }\n    } = getState();\n    await api.sendMessage({\n      subject,\n      users,\n      userGroups,\n      organisationUnits,\n      text: input,\n      attachments\n    });\n    dispatch(createAction(actions.SEND_MESSAGE_SUCCESS, {\n      messageType,\n      page: 1\n    }));\n    dispatch(loadMessageConversations());\n  } catch (error) {\n    dispatch(createAction(actions.SEND_MESSAGE_ERROR, {\n      error\n    }));\n  }\n};\nexport const sendFeedbackMessage = messageType => async (dispatch, getState) => {\n  const state = getState();\n\n  try {\n    await api.sendFeedbackMessage(state.messaging.subject, state.messaging.input);\n    dispatch(createAction(actions.SEND_MESSAGE_SUCCESS, {\n      messageType: messageType,\n      page: 1\n    }));\n    dispatch(loadMessageConversations());\n  } catch (error) {\n    dispatch(createAction(actions.SEND_MESSAGE_ERROR, {\n      error\n    }));\n  }\n};\nexport const replyMessage = ({\n  message,\n  internalReply,\n  messageConversation,\n  messageType\n}) => async (dispatch, getState) => {\n  try {\n    const {\n      id\n    } = messageConversation;\n    const state = getState();\n    const attachments = state.messaging.attachments.map(attachment => attachment.id);\n    await api.replyMessage({\n      message,\n      internalReply,\n      attachments,\n      id\n    });\n    dispatch(createAction(actions.REPLY_MESSAGE_SUCCESS, {\n      messageConversation: messageConversation,\n      messageType: messageType,\n      page: 1\n    }));\n    dispatch(loadMessageConversations());\n    dispatch(setSelectedMessageConversation(messageConversation));\n  } catch (error) {\n    dispatch(createAction(actions.REPLY_MESSAGE_ERROR, {\n      error\n    }));\n  }\n};\nexport const markMessageConversations = (mode, markedConversations, messageType) => async dispatch => {\n  try {\n    await (mode === 'read' ? api.markRead(markedConversations) : api.markUnread(markedConversations));\n    dispatch(createAction(actions.MARK_MESSAGE_CONVERSATIONS_SUCCESS, {\n      messageType: messageType,\n      page: 1\n    }));\n    dispatch(loadMessageConversations());\n  } catch (error) {\n    dispatch(createAction(actions.MARK_MESSAGE_CONVERSATIONS_ERROR, {\n      error\n    }));\n  }\n};\nexport const addRecipients = ({\n  users,\n  userGroups,\n  organisationUnits,\n  messageConversation,\n  messageType\n}) => async dispatch => {\n  try {\n    const {\n      id: messageConversationId\n    } = messageConversation;\n    await api.addRecipients({\n      users,\n      userGroups,\n      organisationUnits,\n      messageConversationId\n    });\n    dispatch(createAction(actions.ADD_RECIPIENTS_SUCCESS, {\n      messageConversation: messageConversation,\n      messageType: messageType,\n      page: 1\n    }));\n    dispatch(setSelectedMessageConversation(messageConversation));\n  } catch (error) {\n    dispatch(createAction(actions.ADD_RECIPIENTS_ERROR, {\n      error\n    }));\n  }\n};\nexport const addRecipientByUserId = id => async dispatch => {\n  try {\n    const user = await api.getUserById(id);\n    dispatch(createAction(actions.ADD_RECIPIENT_BY_ID_SUCCESS, user));\n  } catch (error) {\n    console.error(error); // No action required, the field will just be empty\n  }\n};\nexport const addAttachment = attachment => async dispatch => {\n  dispatch(createAction(actions.ADD_ATTACHMENT, attachment));\n\n  try {\n    const result = await api.addAttachment(attachment);\n    dispatch(createAction(actions.ADD_ATTACHMENT_SUCCESS, {\n      id: result.response.fileResource.id,\n      name: attachment.name,\n      contentLength: result.response.fileResource.contentLength\n    }));\n  } catch (error) {\n    dispatch(createAction(actions.ADD_ATTACHMENT_ERROR, {\n      error\n    }));\n  }\n};\nexport const downloadAttachment = (messageConversationId, messageId, attachmentId) => dispatch => {\n  api.downloadAttachment(messageConversationId, messageId, attachmentId);\n  dispatch(createAction(actions.DOWNLOAD_ATTACHMENT_SUCCESS));\n};\n/************************\n * PLAIN ACTION SECTION *\n ************************/\n\nexport const clearSnackMessage = () => createAction(actions.CLEAR_SNACK_MESSAGE);\nexport const clearCheckedIds = () => createAction(actions.CLEAR_CHECKED);\nexport const clearSelectedMessageConversation = () => createAction(actions.CLEAR_SELECTED_MESSAGE_CONVERSATION);\nexport const displaySnackMessage = ({\n  message,\n  onSnackActionClick,\n  onSnackRequestClose,\n  snackType\n}) => createAction(actions.DISPLAY_SNACK_MESSAGE, {\n  message,\n  onSnackActionClick,\n  onSnackRequestClose,\n  snackType\n});\nexport const setAllChecked = messageConversationIds => createAction(actions.SET_ALL_CHECKED, {\n  messageConversationIds\n});\nexport const setChecked = (messageConversation, selectedValue) => createAction(actions.SET_CHECKED, {\n  messageConversation,\n  selectedValue\n});\nexport const setFilter = (filter, filterType) => createAction(actions.SET_FILTER, {\n  filter,\n  filterType\n});\nexport const updateInputFields = (subject, input, recipients) => createAction(actions.UPDATE_INPUT_FIELDS, {\n  subject,\n  input,\n  recipients\n});\nexport const clearAttachments = () => createAction(actions.CLEAR_ATTACHMENTS);\nexport const setSelectedMessageType = messageTypeId => createAction(actions.SET_SELECTED_MESSAGE_TYPE, {\n  messageTypeId\n});\nexport const removeAttachment = attachmentId => createAction(actions.REMOVE_ATTACHMENT, {\n  attachmentId\n});\nexport const cancelAttachment = attachmentName => createAction(actions.CANCEL_ATTACHMENT, {\n  attachmentName\n});\nexport const setIsInFeedbackRecipientGroup = isInFeedbackRecipientGroup => createAction(actions.SET_IN_FEEDBACK_RECIPIENT_GROUP, {\n  isInFeedbackRecipientGroup\n});\nexport const setDhis2CoreVersion = version => createAction(actions.SET_DHIS2_CORE_VERSION, version);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport propTypes from '@dhis2/prop-types';\nimport Snackbar from 'material-ui/Snackbar';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose, pure } from 'recompose';\nimport { clearSnackMessage } from '../../actions/index.js';\nimport theme from '../../styles/theme.js';\nconst DEFAULT_MESSAGE_DURATION = 4000;\nconst contentColorStyle = {\n  NEGATIVE: theme.palette.negative,\n  NEUTRAL: theme.palette.primary1Color,\n  POSITIVE: theme.palette.alternateTextColor\n};\n\nclass CustomSnackBar extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"closeMessage\", () => {\n      this.props.clearSnackMessage();\n      this.setState({\n        show: false\n      });\n      this.props.onSnackRequestClose && this.props.onSnackRequestClose();\n    });\n\n    this.state = {\n      show: false\n    };\n  }\n\n  componentDidUpdate(_prevProps, prevState) {\n    if (!prevState.show && this.props.message) {\n      this.setState({\n        show: true\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Snackbar, {\n      open: this.props.message !== '' && this.state.show,\n      message: this.props.message || 'Missing snackbar message',\n      autoHideDuration: DEFAULT_MESSAGE_DURATION,\n      onRequestClose: this.closeMessage,\n      action: this.props.onSnackActionClick && 'undo',\n      onActionClick: () => {\n        this.props.onSnackActionClick();\n        this.setState({\n          show: false\n        });\n      },\n      contentStyle: {\n        color: contentColorStyle[this.props.type]\n      },\n      style: {\n        pointerEvents: 'none',\n        whiteSpace: 'nowrap'\n      },\n      bodyStyle: {\n        pointerEvents: 'initial',\n        maxWidth: 'none'\n      }\n    });\n  }\n\n}\n\nCustomSnackBar.propTypes = {\n  clearSnackMessage: propTypes.func,\n  message: propTypes.string,\n  type: propTypes.oneOf(['NEGATIVE', 'NEUTRAL', 'POSITIVE']),\n  onSnackActionClick: propTypes.func,\n  onSnackRequestClose: propTypes.func\n};\n\nconst mapStateToProps = state => ({\n  message: state.messaging.snackMessage,\n  type: state.messaging.snackType,\n  onSnackActionClick: state.messaging.onSnackActionClick,\n  onSnackRequestClose: state.messaging.onSnackRequestClose\n});\n\nexport default compose(connect(mapStateToProps, {\n  clearSnackMessage\n}), pure)(CustomSnackBar);","import { createHashHistory } from 'history';\nexport default createHashHistory();","import theme from '../styles/theme.js';\nexport const messagePanelContainer = {\n  overflowY: 'scroll',\n  overflowX: 'hidden',\n  borderRightWidth: '1px',\n  borderRightColor: theme.palette.accent4Color,\n  height: 'calc(100vh - 95px)'\n};\nexport const subheader = {\n  paddingLeft: '0px',\n  fontSize: '20px'\n};","import i18n from '@dhis2/d2-i18n';\nconst extendedChoices = {\n  STATUS: [{\n    key: 'NONE',\n    value: 'NONE',\n    primaryText: i18n.t('No status')\n  }, {\n    key: 'OPEN',\n    value: 'OPEN',\n    primaryText: i18n.t('Open')\n  }, {\n    key: 'PENDING',\n    value: 'PENDING',\n    primaryText: i18n.t('Pending')\n  }, {\n    key: 'INVALID',\n    value: 'INVALID',\n    primaryText: i18n.t('Invalid')\n  }, {\n    key: 'SOLVED',\n    value: 'SOLVED',\n    primaryText: i18n.t('Solved')\n  }],\n  PRIORITY: [{\n    key: 'NONE',\n    value: 'NONE',\n    primaryText: i18n.t('No priority')\n  }, {\n    key: 'HIGH',\n    value: 'HIGH',\n    primaryText: i18n.t('High')\n  }, {\n    key: 'MEDIUM',\n    value: 'MEDIUM',\n    primaryText: i18n.t('Medium')\n  }, {\n    key: 'LOW',\n    value: 'LOW',\n    primaryText: i18n.t('Low')\n  }]\n};\nexport default extendedChoices;","import propTypes from '@dhis2/prop-types';\nimport Dialog from 'material-ui/Dialog';\nimport React from 'react';\nimport { Provider, ReactReduxContext } from 'react-redux';\n/*\n * This component is needed because in this version of MUI\n * the redux context is not propagated onto a Portal\n */\n\nexport default function DialogWithReduxState(props) {\n  return /*#__PURE__*/React.createElement(ReactReduxContext.Consumer, null, ctx => /*#__PURE__*/React.createElement(Dialog, props, /*#__PURE__*/React.createElement(Provider, {\n    store: ctx.store\n  }, props.children)));\n}\nDialogWithReduxState.propTypes = {\n  children: propTypes.node\n};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport propTypes from '@dhis2/prop-types';\nimport ChipInput from 'material-ui-chip-input';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as api from '../../api/api.js';\nimport { debounce } from '../../utils/helpers.js';\nconst searchDelay = 1200;\nconst minCharLength = 2;\n/*\n * An AutoComplete text field with suggestions from a given list of\n * identifiable objects. Selected objects are shown as chips in the text field.\n */\n\nclass SuggestionField extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      input: '',\n      searchResult: [],\n      searchOnlyUsers: this.props.searchOnlyUsers,\n      searchOnlyFeedbackRecipients: this.props.searchOnlyFeedbackRecipients,\n      lastSearch: '',\n      errorText: undefined\n    });\n\n    _defineProperty(this, \"debouncedSearch\", debounce(this.search.bind(this), searchDelay));\n\n    _defineProperty(this, \"onSuggestionClick\", chip => {\n      if (this.props.onSuggestionClick !== undefined) {\n        this.props.onSuggestionClick(chip);\n      } else {\n        this.wipeInput();\n        this.debouncedSearch('');\n        const doInsert = !this.props.recipients.find(recipient => recipient.id === chip.id);\n        doInsert && this.props.updateRecipients([...this.props.recipients, this.state.searchResult.find(result => result.id === chip.id)]);\n      }\n    });\n\n    _defineProperty(this, \"onRemoveChip\", id => {\n      this.props.updateRecipients(this.props.recipients.filter(recipient => recipient.id !== id));\n    });\n\n    _defineProperty(this, \"wipeInput\", () => {\n      this.setState({\n        input: '',\n        searchResult: []\n      });\n    });\n\n    _defineProperty(this, \"updateInput\", input => {\n      this.debouncedSearch(input);\n      this.setState({\n        input\n      });\n    });\n  }\n\n  search(input) {\n    const doSearch = !this.state.searchResult.find(result => result.displayName === input) && input !== '' && input.length >= minCharLength;\n\n    if (doSearch) {\n      const {\n        feedbackRecipientsId,\n        searchOnlyUsers,\n        searchOnlyFeedbackRecipients,\n        dhis2CoreVersion\n      } = this.props;\n      api.searchRecipients({\n        searchValue: input,\n        searchOnlyUsers,\n        searchOnlyFeedbackRecipients,\n        feedbackRecipientsId,\n        dhis2CoreVersion\n      }).then(({\n        users,\n        userGroups,\n        organisationUnits\n      }) => {\n        const addType = type => result => ({ ...result,\n          type\n        });\n\n        let internalSearchResult = users.map(addType('user'));\n\n        if (!this.state.searchOnlyUsers) {\n          internalSearchResult = internalSearchResult.concat(userGroups.map(addType('userGroup'))).concat(organisationUnits.map(addType('organisationUnit')));\n        }\n\n        this.setState({\n          searchResult: internalSearchResult,\n          errorText: internalSearchResult.length === 0 ? i18n.t('No results found') : undefined\n        });\n      });\n    } else {\n      this.setState({\n        lastSearch: input,\n        searchResult: this.state.lastSearch !== '' && input === '' || input.length < minCharLength ? [] : this.state.searchResult,\n        errorText: input !== '' && input.length < minCharLength ? i18n.t(`Please enter at least ${minCharLength} characters`) : this.state.searchWarning\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: { ...this.props.style,\n        height: this.props.inputHeight\n      }\n    }, /*#__PURE__*/React.createElement(ChipInput, {\n      style: {\n        marginBottom: 16\n      },\n      disabled: this.props.disabled === undefined ? false : this.props.disabled,\n      errorText: this.props.errorText || this.state.errorText,\n      value: this.props.recipients,\n      fullWidth: true,\n      openOnFocus: true,\n      searchText: this.state.input,\n      floatingLabelText: this.props.label,\n      dataSource: this.state.searchResult,\n      dataSourceConfig: {\n        text: 'displayName',\n        value: 'id'\n      },\n      onUpdateInput: this.updateInput,\n      onRequestAdd: chip => this.onSuggestionClick(chip),\n      onRequestDelete: id => this.onRemoveChip(id)\n    }));\n  }\n\n}\n\nSuggestionField.propTypes = {\n  dhis2CoreVersion: propTypes.number,\n  disabled: propTypes.bool,\n  errorText: propTypes.string,\n  feedbackRecipientsId: propTypes.string,\n  inputHeight: propTypes.string,\n  label: propTypes.string,\n  recipients: propTypes.array,\n  searchOnlyFeedbackRecipients: propTypes.bool,\n  searchOnlyUsers: propTypes.bool,\n  style: propTypes.object,\n  updateRecipients: propTypes.func,\n  onSuggestionClick: propTypes.func\n};\nexport default connect(state => ({\n  dhis2CoreVersion: state.messaging.dhis2CoreVersion\n}))(SuggestionField);","import i18n from '@dhis2/d2-i18n';\nimport propTypes from '@dhis2/prop-types';\nimport React from 'react';\nimport DialogWithReduxState from './DialogWithReduxState.js';\nimport SuggestionField from './SuggestionField.js';\n\nconst AssignToDialog = ({\n  open,\n  onRequestClose,\n  updateMessageConversations,\n  messageType,\n  feedbackRecipientsId\n}) => /*#__PURE__*/React.createElement(DialogWithReduxState, {\n  open: open,\n  onRequestClose: () => {\n    onRequestClose();\n  }\n}, /*#__PURE__*/React.createElement(SuggestionField, {\n  onSuggestionClick: chip => {\n    updateMessageConversations([chip.id]);\n    onRequestClose();\n  },\n  searchOnlyUsers: true,\n  searchOnlyFeedbackRecipients: messageType.id === 'TICKET',\n  feedbackRecipientsId: feedbackRecipientsId,\n  recipients: [],\n  key: 'suggestionField',\n  label: i18n.t('Assignee')\n}));\n\nAssignToDialog.propTypes = {\n  feedbackRecipientsId: propTypes.string,\n  messageType: propTypes.shape({\n    id: propTypes.string\n  }),\n  open: propTypes.bool,\n  updateMessageConversations: propTypes.func,\n  onRequestClose: propTypes.func\n};\nexport default AssignToDialog;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport propTypes from '@dhis2/prop-types';\nimport Assignment from 'material-ui-icons/Assignment';\nimport Delete from 'material-ui-icons/Delete';\nimport Done from 'material-ui-icons/Done';\nimport MarkUnread from 'material-ui-icons/Markunread';\nimport Divider from 'material-ui/Divider';\nimport FlatButton from 'material-ui/FlatButton';\nimport IconButton from 'material-ui/IconButton';\nimport IconMenu from 'material-ui/IconMenu';\nimport MenuItem from 'material-ui/MenuItem';\nimport Subheader from 'material-ui/Subheader';\nimport ArrowDropRight from 'material-ui/svg-icons/navigation-arrow-drop-right';\nimport MoreVertIcon from 'material-ui/svg-icons/navigation/more-vert';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { clearCheckedIds, clearSelectedMessageConversation, deleteMessageConversations, updateMessageConversations, markMessageConversations } from '../../actions/index.js';\nimport extendedChoices from '../../constants/extendedChoices.js';\nimport history from '../../utils/history.js';\nimport AssignToDialog from './AssignToDialog.js';\nimport DialogWithReduxState from './DialogWithReduxState.js';\nconst multiSelectDisplayLimit = 99;\nconst styles = {\n  canvas: {\n    width: '400px',\n    display: 'flex'\n  },\n  extendedChoices: {\n    display: 'flex',\n    justifyContent: 'flex-start'\n  },\n  nrSelected: {\n    padding: '0px 0px',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap'\n  }\n};\n\nclass ToolbarExtendedChoicePicker extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"getIds\", () => this.props.selectedMessageConversation && this.props.checkedIds.length === 0 ? [this.props.selectedMessageConversation.id] : this.props.checkedIds.map(id => id.id));\n\n    _defineProperty(this, \"updateMessageConversation\", (identifier, value) => {\n      const {\n        selectedMessageType: messageType,\n        selectedMessageConversation\n      } = this.props;\n      const messageConversationIds = this.getIds();\n      this.props.updateMessageConversations({\n        messageConversationIds,\n        identifier,\n        value,\n        messageType,\n        selectedMessageConversation\n      });\n      this.props.checkedIds.length > 0 && this.props.clearCheckedIds();\n    });\n\n    _defineProperty(this, \"markMessageConversations\", mode => {\n      const ids = this.getIds();\n      this.props.markMessageConversations(mode, ids, this.props.selectedMessageType);\n      this.props.checkedIds.length > 0 && this.props.clearCheckedIds();\n    });\n\n    _defineProperty(this, \"toggleDialog\", () => {\n      this.setState({\n        dialogOpen: !this.state.dialogOpen\n      });\n    });\n\n    this.state = {\n      checkedItems: false,\n      dialogOpen: false,\n      assignToOpen: false\n    };\n  }\n\n  render() {\n    const messageConversation = this.props.selectedMessageConversation;\n    const multiSelect = this.props.checkedIds.length > 0;\n    const display = multiSelect || messageConversation !== undefined;\n    const actionButtons = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FlatButton, {\n      label: i18n.t('Cancel'),\n      primary: true,\n      onClick: () => this.toggleDialog()\n    }), /*#__PURE__*/React.createElement(FlatButton, {\n      label: i18n.t('Submit'),\n      primary: true,\n      keyboardFocused: true,\n      onClick: () => {\n        this.props.deleteMessageConversations(this.getIds(), this.props.selectedMessageType);\n        this.props.clearCheckedIds();\n        this.toggleDialog();\n\n        if (this.props.selectedMessageConversation) {\n          this.props.clearSelectedMessageConversation();\n          history.push(`/${this.props.selectedMessageType.id}`);\n        }\n      }\n    }));\n    const displayNumberOfCheckedIds = this.props.checkedIds.length > multiSelectDisplayLimit ? `${multiSelectDisplayLimit}+` : this.props.checkedIds.length;\n    return display ? /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.canvas\n    }, /*#__PURE__*/React.createElement(DialogWithReduxState, {\n      title: i18n.t('Are you sure you want to delete selected message conversation(s)?'),\n      actions: actionButtons,\n      modal: false,\n      open: this.state.dialogOpen,\n      onRequestClose: this.toggleDialog\n    }), /*#__PURE__*/React.createElement(AssignToDialog, {\n      open: this.state.assignToOpen,\n      onRequestClose: () => this.setState({\n        assignToOpen: !this.state.assignToOpen\n      }),\n      updateMessageConversations: id => this.updateMessageConversation('ASSIGNEE', id),\n      messageType: this.props.selectedMessageType,\n      feedbackRecipientsId: this.props.feedbackRecipientsId\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.extendedChoices\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      tooltip: i18n.t('Delete selected'),\n      onClick: () => {\n        this.toggleDialog();\n      }\n    }, /*#__PURE__*/React.createElement(Delete, null)), /*#__PURE__*/React.createElement(IconButton, {\n      tooltip: i18n.t('Mark selected as unread'),\n      onClick: () => {\n        this.markMessageConversations('unread');\n      }\n    }, /*#__PURE__*/React.createElement(MarkUnread, null)), /*#__PURE__*/React.createElement(IconButton, {\n      tooltip: i18n.t('Mark selected as read'),\n      onClick: () => {\n        this.markMessageConversations('read');\n      }\n    }, /*#__PURE__*/React.createElement(Done, null)), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(IconButton, {\n      onClick: () => this.setState({\n        assignToOpen: !this.state.assignToOpen\n      }),\n      tooltip: i18n.t('Assign selected')\n    }, /*#__PURE__*/React.createElement(Assignment, null)), /*#__PURE__*/React.createElement(IconMenu, {\n      iconButtonElement: /*#__PURE__*/React.createElement(IconButton, null, /*#__PURE__*/React.createElement(MoreVertIcon, null)),\n      anchorOrigin: {\n        horizontal: 'left',\n        vertical: 'top'\n      },\n      targetOrigin: {\n        horizontal: 'left',\n        vertical: 'top'\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      key: 'markFollowUp',\n      value: 'markFollowUp',\n      primaryText: i18n.t('Mark for followup'),\n      onClick: () => this.updateMessageConversation('FOLLOW_UP', true)\n    }), /*#__PURE__*/React.createElement(MenuItem, {\n      key: 'clearFollowUp',\n      value: 'clearFollowUp',\n      primaryText: i18n.t('Clear followup'),\n      onClick: () => this.updateMessageConversation('FOLLOW_UP', false)\n    }), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(Divider, null), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(MenuItem, {\n      key: 'clearAssigned',\n      value: 'clearAssigned',\n      primaryText: i18n.t('Clear assignee'),\n      onClick: () => this.updateMessageConversation('ASSIGNEE', undefined)\n    }), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(MenuItem, {\n      primaryText: i18n.t('Set status'),\n      key: 'setStatus',\n      rightIcon: /*#__PURE__*/React.createElement(ArrowDropRight, null),\n      menuItems: extendedChoices.STATUS.map(elem => /*#__PURE__*/React.createElement(MenuItem, {\n        key: `${elem.key}_status`,\n        value: elem.value,\n        primaryText: elem.primaryText,\n        onClick: () => this.updateMessageConversation('STATUS', elem.key)\n      }))\n    }), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(MenuItem, {\n      primaryText: i18n.t('Set priority'),\n      key: 'setPriority',\n      rightIcon: /*#__PURE__*/React.createElement(ArrowDropRight, null),\n      menuItems: extendedChoices.PRIORITY.map(elem => /*#__PURE__*/React.createElement(MenuItem, {\n        key: `${elem.key}_priority`,\n        value: elem.value,\n        primaryText: elem.primaryText,\n        onClick: () => this.updateMessageConversation('PRIORITY', elem.key)\n      }))\n    }))), multiSelect && /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.nrSelected\n    }, `${displayNumberOfCheckedIds} ${i18n.t('selected')}`)) : /*#__PURE__*/React.createElement(\"div\", null);\n  }\n\n}\n\nToolbarExtendedChoicePicker.propTypes = {\n  checkedIds: propTypes.array,\n  clearCheckedIds: propTypes.func,\n  clearSelectedMessageConversation: propTypes.func,\n  deleteMessageConversations: propTypes.func,\n  displayExtendedChoices: propTypes.bool,\n  feedbackRecipientsId: propTypes.string,\n  markMessageConversations: propTypes.func,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.object,\n  updateMessageConversations: propTypes.func\n};\n\nconst mapStateToProps = state => ({\n  selectedMessageType: state.messaging.selectedMessageType,\n  selectedMessageConversation: state.messaging.selectedMessageConversation,\n  checkedIds: state.messaging.checkedIds,\n  feedbackRecipientsId: state.messaging.feedbackRecipientsId\n});\n\nexport default compose(connect(mapStateToProps, {\n  clearCheckedIds,\n  clearSelectedMessageConversation,\n  deleteMessageConversations,\n  updateMessageConversations,\n  markMessageConversations\n}, null, {\n  pure: false\n}))(ToolbarExtendedChoicePicker);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport propTypes from '@dhis2/prop-types';\nimport CreateMessageIcon from 'material-ui-icons/Add';\nimport NavigationBack from 'material-ui-icons/ArrowBack';\nimport ViewList from 'material-ui-icons/ViewHeadline';\nimport ViewFancy from 'material-ui-icons/ViewList';\nimport Checkbox from 'material-ui/Checkbox/Checkbox';\nimport FlatButton from 'material-ui/FlatButton';\nimport IconButton from 'material-ui/IconButton';\nimport IconMenu from 'material-ui/IconMenu';\nimport MenuItem from 'material-ui/MenuItem';\nimport Paper from 'material-ui/Paper';\nimport SelectField from 'material-ui/SelectField';\nimport Subheader from 'material-ui/Subheader';\nimport MoreVertIcon from 'material-ui/svg-icons/navigation/more-vert';\nimport TextField from 'material-ui/TextField';\nimport React, { Component } from 'react';\nimport extendedChoices from '../../constants/extendedChoices.js';\nimport theme from '../../styles/theme.js';\nimport { debounce } from '../../utils/helpers.js';\nimport history from '../../utils/history.js';\nimport ToolbarExtendedChoicePicker from './ToolbarExtendedChoicePicker.js';\nconst headerHeight = '48px';\nconst searchDelay = 300;\nconst styles = {\n  canvas(checkedOptions) {\n    return {\n      display: 'flex',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      backgroundColor: checkedOptions ? theme.palette.blue50 : theme.palette.accent2Color,\n      zIndex: 10\n    };\n  },\n\n  checkedOption: {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    minWidth: '200px',\n    margin: '6px 0'\n  },\n  filterControl: {\n    flex: 2,\n    height: headerHeight,\n    marginRight: 16,\n    maxWidth: 256\n  },\n  rightHandCanvas: {\n    flex: '2 0',\n    display: 'flex',\n    paddingLeft: 16\n  },\n  // IE11 has buggy support for `justifyContent: flex-end;`\n  // to achieve the same result we use a spacer div\n  ie11Spacer: {\n    flexGrow: 1\n  },\n  iconMenu: {\n    width: '30px',\n    display: 'flex'\n  }\n};\n\nclass Toolbar extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      lastMessageFilter: ''\n    });\n\n    _defineProperty(this, \"debouncedSearch\", debounce(this.search, searchDelay));\n  }\n\n  search(messageFilter) {\n    if (this.props.selectedMessageType && this.state.lastMessageFilter !== messageFilter) {\n      this.props.loadMessageConversations(this.props.selectedMessageType, this.props.selectedMessageType.id);\n      this.setState({\n        lastMessageFilter: messageFilter\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.selectedMessageType && this.props.selectedMessageType.id !== prevProps.selectedMessageType.id) {\n      this.debouncedSearch('');\n      this.props.messageFilter !== undefined && this.props.setFilter(undefined, 'MESSAGE');\n      this.props.statusFilter !== undefined && this.props.setFilter(undefined, 'STATUS');\n      this.props.priorityFilter !== undefined && this.props.setFilter(undefined, 'PRIORITY');\n      this.props.assignedToMeFilter && this.props.setFilter(false, 'ASSIGNED_TO_ME');\n      this.props.markedForFollowUpFilter && this.props.setFilter(false, 'MARKED_FOR_FOLLOWUP');\n      this.props.unreadFilter && this.props.setFilter(false, 'UNREAD');\n    }\n\n    if (this.props.selectedMessageType !== undefined && !this.props.selectedMessageType.loading && (prevProps.statusFilter !== this.props.statusFilter || prevProps.priorityFilter !== this.props.priorityFilter || prevProps.assignedToMeFilter !== this.props.assignedToMeFilter || prevProps.markedForFollowUpFilter !== this.props.markedForFollowUpFilter || prevProps.unreadFilter !== this.props.unreadFilter || prevProps.selectedMessageType === undefined || prevProps.selectedMessageType.id !== this.props.selectedMessageType.id)) {\n      this.props.loadMessageConversations(this.props.selectedMessageType, this.props.selectedMessageType.id);\n    }\n  }\n\n  render() {\n    const id = this.props.id;\n    const displayExtendedChoices = this.props.displayExtendedChoices;\n    const checkedOptions = this.props.checkedOptions;\n    const displaySearch = !this.props.wideview || this.props.selectedMessageConversation === undefined && id !== 'create';\n    return /*#__PURE__*/React.createElement(Paper, {\n      style: styles.canvas(checkedOptions)\n    }, /*#__PURE__*/React.createElement(\"div\", null, !checkedOptions && /*#__PURE__*/React.createElement(FlatButton, {\n      style: styles.checkedOption,\n      icon: /*#__PURE__*/React.createElement(CreateMessageIcon, null),\n      onClick: () => history.push('/PRIVATE/create'),\n      label: i18n.t('Compose')\n    }), checkedOptions && /*#__PURE__*/React.createElement(FlatButton, {\n      style: styles.checkedOption,\n      icon: /*#__PURE__*/React.createElement(NavigationBack, null),\n      onClick: () => this.props.clearCheckedIds(),\n      label: i18n.t('Deselect all')\n    })), /*#__PURE__*/React.createElement(ToolbarExtendedChoicePicker, {\n      displayExtendedChoices: displayExtendedChoices\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.rightHandCanvas\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.ie11Spacer\n    }), displayExtendedChoices && displaySearch && !checkedOptions && /*#__PURE__*/React.createElement(SelectField, {\n      style: styles.filterControl,\n      labelStyle: {\n        color: this.props.statusFilter === undefined ? 'lightGray' : 'black',\n        top: this.props.statusFilter === undefined ? '-15px' : '-2px'\n      },\n      selectedMenuItemStyle: {\n        color: theme.palette.primary1Color\n      },\n      floatingLabelText: this.props.statusFilter === undefined ? i18n.t('Status') : '',\n      floatingLabelStyle: {\n        top: '15px'\n      },\n      iconStyle: {\n        top: this.props.statusFilter === undefined ? '-15px' : '0px'\n      },\n      value: this.props.statusFilter,\n      onChange: (event, key, payload) => {\n        this.props.setFilter(payload === null ? undefined : payload, 'STATUS');\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      key: null,\n      value: null,\n      primaryText: ''\n    }), extendedChoices.STATUS.map(elem => /*#__PURE__*/React.createElement(MenuItem, {\n      key: elem.key,\n      value: elem.value,\n      primaryText: elem.primaryText\n    }))), displayExtendedChoices && displaySearch && !checkedOptions && /*#__PURE__*/React.createElement(SelectField, {\n      style: styles.filterControl,\n      labelStyle: {\n        color: this.props.priorityFilter === undefined ? 'lightGray' : 'black',\n        top: this.props.priorityFilter === undefined ? '-15px' : '-2px'\n      },\n      selectedMenuItemStyle: {\n        color: theme.palette.primary1Color\n      },\n      floatingLabelText: this.props.priorityFilter === undefined ? i18n.t('Priority') : '',\n      floatingLabelStyle: {\n        top: '15px'\n      },\n      iconStyle: {\n        top: this.props.priorityFilter === undefined ? '-15px' : '0px'\n      },\n      value: this.props.priorityFilter,\n      onChange: (event, key, payload) => {\n        this.props.setFilter(payload === null ? undefined : payload, 'PRIORITY');\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      key: null,\n      value: null,\n      primaryText: ''\n    }), extendedChoices.PRIORITY.map(elem => /*#__PURE__*/React.createElement(MenuItem, {\n      key: elem.key,\n      value: elem.value,\n      primaryText: elem.primaryText\n    }))), !checkedOptions && displaySearch && /*#__PURE__*/React.createElement(TextField, {\n      style: styles.filterControl,\n      fullWidth: true,\n      hintText: i18n.t('Search'),\n      value: this.props.messageFilter || '',\n      onChange: (event, messageFilter) => {\n        this.debouncedSearch(messageFilter);\n        this.props.setFilter(messageFilter, 'MESSAGE');\n      },\n      type: \"search\"\n    }), !checkedOptions && displaySearch && /*#__PURE__*/React.createElement(IconMenu, {\n      iconButtonElement: /*#__PURE__*/React.createElement(IconButton, null, /*#__PURE__*/React.createElement(MoreVertIcon, null)),\n      anchorOrigin: {\n        horizontal: 'right',\n        vertical: 'top'\n      },\n      targetOrigin: {\n        horizontal: 'right',\n        vertical: 'top'\n      },\n      style: styles.iconMenu,\n      menuStyle: {\n        overflowX: 'hidden'\n      }\n    }, /*#__PURE__*/React.createElement(Subheader, {\n      style: {\n        padding: '0px 16px'\n      }\n    }, i18n.t('Set filter')), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(Checkbox, {\n      style: {\n        padding: '0px 16px'\n      },\n      key: 'assignedToMeFilter',\n      label: i18n.t('Assigned to me'),\n      checked: this.props.assignedToMeFilter,\n      onClick: () => {\n        this.props.setFilter(!this.props.assignedToMeFilter, 'ASSIGNED_TO_ME');\n      }\n    }), /*#__PURE__*/React.createElement(Checkbox, {\n      style: {\n        padding: '0px 16px'\n      },\n      key: 'markedForFollowUpFilter',\n      label: i18n.t('Marked for followup'),\n      checked: this.props.markedForFollowUpFilter,\n      onClick: () => {\n        this.props.setFilter(!this.props.markedForFollowUpFilter, 'MARKED_FOR_FOLLOWUP');\n      }\n    }), /*#__PURE__*/React.createElement(Checkbox, {\n      style: {\n        padding: '0px 16px'\n      },\n      key: 'unreadFilter',\n      label: i18n.t('Unread messages'),\n      checked: this.props.unreadFilter,\n      onClick: () => {\n        this.props.setFilter(!this.props.unreadFilter, 'UNREAD');\n      }\n    })), /*#__PURE__*/React.createElement(FlatButton, {\n      style: {\n        width: '50px',\n        alignSelf: 'center'\n      },\n      icon: !this.props.wideview ? /*#__PURE__*/React.createElement(ViewList, null) : /*#__PURE__*/React.createElement(ViewFancy, null),\n      onClick: () => this.props.toogleWideview()\n    })));\n  }\n\n}\n\nToolbar.propTypes = {\n  assignedToMeFilter: propTypes.bool,\n  checkedOptions: propTypes.bool,\n  clearCheckedIds: propTypes.func,\n  displayExtendedChoices: propTypes.bool,\n  id: propTypes.string,\n  loadMessageConversations: propTypes.func,\n  markedForFollowUpFilter: propTypes.bool,\n  messageFilter: propTypes.string,\n  priorityFilter: propTypes.string,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.object,\n  setFilter: propTypes.func,\n  statusFilter: propTypes.string,\n  toogleWideview: propTypes.func,\n  unreadFilter: propTypes.bool,\n  wideview: propTypes.bool\n};\nexport default Toolbar;","import i18n from '@dhis2/d2-i18n';\nimport propTypes from '@dhis2/prop-types';\nimport Checkbox from 'material-ui/Checkbox';\nimport Paper from 'material-ui/Paper';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { setAllChecked, clearCheckedIds } from '../../actions/index.js';\nimport { fontFamily } from '../../constants/development.js';\nimport theme from '../../styles/theme.js';\nconst fontSize = '16px';\nconst styles = {\n  canvas(backgroundColor) {\n    return {\n      backgroundColor,\n      display: 'flex',\n      transition: 'all 0.2s ease-in-out',\n      boxSizing: 'border-box',\n      position: 'relative',\n      whiteSpace: 'nowrap',\n      alignSelf: 'center',\n      boxShadow: 'none',\n      borderBottom: '1px solid #dfdfdf'\n    };\n  },\n\n  checkBox: {\n    flex: '0 0 32px',\n    display: 'flex',\n    alignSelf: 'center',\n    paddingLeft: '12px'\n  },\n  sender: {\n    fontFamily,\n    fontSize,\n    flex: 3,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    color: 'black',\n    paddingLeft: 10,\n    alignSelf: 'center'\n  },\n  subject: {\n    flex: 8,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    fontFamily,\n    fontSize,\n    color: 'black',\n    paddingLeft: 10\n  },\n  extendedLabel: {\n    flex: 2,\n    color: 'black',\n    fontSize,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    padding: '0 0 0 10px'\n  }\n};\n\nclass MessageConversationListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cursor: 'auto',\n      allChecked: false\n    };\n  }\n\n  componentDidUpdate() {\n    if (this.state.allChecked && this.props.checkedIds.length < this.props.messages.length) {\n      this.setState({\n        allChecked: false\n      });\n    }\n  }\n\n  render() {\n    const displayExtendedChoices = this.props.displayExtendedChoices;\n    return /*#__PURE__*/React.createElement(Paper, {\n      style: styles.canvas(theme.palette.canvasColor)\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      checked: this.state.allChecked,\n      style: styles.checkBox,\n      onCheck: () => {\n        this.state.allChecked ? this.props.clearCheckedIds() : this.props.setAllChecked(this.props.messages.map(child => ({\n          id: child.id\n        })));\n        this.setState({\n          allChecked: !this.state.allChecked\n        });\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.sender\n    }, i18n.t('Sender')), /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.subject\n    }, i18n.t('Subject')), displayExtendedChoices && /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.extendedLabel\n    }, i18n.t('Status')), displayExtendedChoices && /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.extendedLabel\n    }, i18n.t('Priority')), this.props.notification && /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.extendedLabel\n    }, i18n.t('Assignee')), /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.extendedLabel\n    }, i18n.t('Date')));\n  }\n\n}\n\nMessageConversationListItem.propTypes = {\n  checkedIds: propTypes.array,\n  clearCheckedIds: propTypes.func,\n  displayExtendedChoices: propTypes.bool,\n  messages: propTypes.array,\n  notification: propTypes.bool,\n  setAllChecked: propTypes.func\n};\n\nconst mapStateToProps = state => ({\n  checkedIds: state.messaging.checkedIds,\n  isInFeedbackRecipientGroup: state.messaging.isInFeedbackRecipientGroup\n});\n\nexport default compose(connect(mapStateToProps, {\n  setAllChecked,\n  clearCheckedIds\n}))(MessageConversationListItem);","import propTypes from '@dhis2/prop-types';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport React from 'react';\nconst styles = {\n  subheaderTitle: {\n    height: '32px',\n    color: 'black',\n    paddingLeft: 0,\n    paddingRight: 16\n  },\n\n  subheader(color, fontWeight) {\n    return {\n      height: '32px',\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      padding: 0,\n      color,\n      fontWeight\n    };\n  }\n\n};\n\nconst ExtendedChoiceLabel = ({\n  showTitle,\n  title,\n  label,\n  color,\n  fontWeight\n}) => {\n  const displayLabel = label && label !== 'NONE' ? title === 'Assignee' ? label : `${label.charAt(0)}${label.toLowerCase().substr(1, label.length)}` : '-';\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flex: 2,\n      paddingLeft: 10,\n      maxWidth: 200\n    }\n  }, showTitle && /*#__PURE__*/React.createElement(Subheader, {\n    style: styles.subheaderTitle\n  }, \" \", title, \" \"), /*#__PURE__*/React.createElement(Subheader, {\n    style: styles.subheader(color, fontWeight)\n  }, displayLabel));\n};\n\nExtendedChoiceLabel.propTypes = {\n  color: propTypes.string,\n  fontWeight: propTypes.string,\n  label: propTypes.string,\n  showTitle: propTypes.bool,\n  title: propTypes.string\n};\nexport default ExtendedChoiceLabel;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport propTypes from '@dhis2/prop-types';\nimport Flag from 'material-ui-icons/Flag';\nimport Checkbox from 'material-ui/Checkbox';\nimport Paper from 'material-ui/Paper';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport moment from 'moment';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { setChecked, setSelectedMessageConversation, markMessageConversations, clearCheckedIds, setFilter, updateInputFields, clearAttachments } from '../../actions/index.js';\nimport { fontFamily } from '../../constants/development.js';\nimport theme from '../../styles/theme.js';\nimport history from '../../utils/history.js';\nimport ExtendedChoiceLabel from '../Common/ExtendedChoiceLabel.js';\nconst styles = {\n  container(backgroundColor, wideview, cursor) {\n    return {\n      backgroundColor,\n      display: 'flex',\n      transition: 'all 0.2s ease-in-out',\n      cursor: cursor,\n      boxSizing: 'border-box',\n      position: 'relative',\n      whiteSpace: 'nowrap',\n      boxShadow: 'none',\n      borderBottom: '1px solid #dfdfdf',\n      flexWrap: wideview ? 'nowrap' : 'wrap'\n    };\n  },\n\n  checkBox(wideview) {\n    return {\n      flex: '0 0 32px',\n      display: 'flex',\n      alignSelf: 'center',\n      paddingLeft: wideview ? 12 : 6\n    };\n  },\n\n  flag: {\n    color: theme.palette.followUp,\n    marginRight: 4\n  },\n\n  sender(wideview, fontWeight) {\n    return {\n      fontFamily,\n      fontSize: '14px',\n      flex: 3,\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      display: 'flex',\n      alignItems: 'center',\n      color: 'black',\n      paddingLeft: wideview ? 10 : 0,\n      fontWeight\n    };\n  },\n\n  subject(wideview, fontColor, fontWeight) {\n    return {\n      flex: 8,\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      paddingLeft: 10,\n      fontFamily,\n      color: fontColor,\n      fontWeight,\n      order: wideview ? 'inherit' : 10,\n      marginTop: wideview ? 0 : -10,\n      flexBasis: wideview ? '0%' : '100%'\n    };\n  },\n\n  dateFormat(wideview, fontColor, fontWeight) {\n    return {\n      flex: 2,\n      fontFamily,\n      paddingLeft: wideview ? 10 : 0,\n      paddingRight: wideview ? 0 : 10,\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      textAlign: wideview ? '' : 'end',\n      color: fontColor,\n      fontWeight\n    };\n  }\n\n};\n\nclass MessageConversationListItem extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onClick\", messageConversation => {\n      this.props.setSelectedMessageConversation(messageConversation);\n\n      if (messageConversation && !messageConversation.read) {\n        this.props.markMessageConversations('read', [messageConversation.id], this.props.selectedMessageType);\n      }\n\n      this.props.updateInputFields('', '', []);\n      this.props.attachments.length > 0 && this.props.clearAttachments();\n      history.push(`/${messageConversation.messageType}/${messageConversation.id}`);\n    });\n\n    _defineProperty(this, \"onMouseEnter\", () => this.setState({\n      cursor: 'pointer',\n      backgroundColor: theme.palette.accent2Color\n    }));\n\n    _defineProperty(this, \"onMouseLeave\", () => this.setState({\n      cursor: 'auto',\n      backgroundColor: theme.palette.canvasColor\n    }));\n\n    _defineProperty(this, \"getBackgroundColor\", (messageConversation, checked) => {\n      const selectedMessageConversation = this.props.selectedMessageConversation && messageConversation.id === this.props.selectedMessageConversation.id;\n\n      if (checked && !selectedMessageConversation) {\n        return theme.palette.blue50;\n      } else if (selectedMessageConversation) {\n        return theme.palette.accent3Color;\n      }\n\n      return this.state.backgroundColor;\n    });\n\n    this.state = {\n      backgroundColor: theme.palette.canvasColor,\n      cursor: 'auto'\n    };\n  }\n\n  render() {\n    const messageConversation = this.props.messageConversation;\n    const title = messageConversation.lastSender ? messageConversation.lastSender.displayName : this.props.selectedMessageType.displayName;\n    const checked = !!this.props.checkedIds.find(x => x.id === messageConversation.id);\n    const displayExtendedChoices = this.props.displayExtendedChoices;\n    const displayTimeDiff = this.props.displayTimeDiff;\n    const today = moment();\n    const messageDate = moment(messageConversation.lastMessage).add(displayTimeDiff);\n    const fontWeight = !messageConversation.read ? 'bold' : '';\n    const fontColor = this.props.messageConversation.read ? 'black' : theme.palette.darkGray;\n    const containerBackgroundColor = this.getBackgroundColor(messageConversation, checked);\n    return /*#__PURE__*/React.createElement(Paper, {\n      style: styles.container(containerBackgroundColor, this.props.wideview, this.state.cursor),\n      onClick: event => {\n        const onClick = event.target.innerText !== undefined && event.target.innerText !== '';\n\n        if (onClick && !this.props.settingSelectedMessageConversation) {\n          this.onClick(messageConversation);\n          this.props.checkedIds.length > 0 && this.props.clearCheckedIds();\n\n          if (this.props.wideview && (this.props.messageFilter !== undefined || this.props.priorityFilter !== undefined || this.props.statusFilter !== undefined)) {\n            this.props.setFilter(undefined, 'MESSAGE');\n          }\n        }\n      },\n      onMouseEnter: this.onMouseEnter,\n      onMouseLeave: this.onMouseLeave\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      checked: checked,\n      style: styles.checkBox(this.props.wideview),\n      onCheck: () => {\n        this.props.setChecked(messageConversation, !checked);\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.sender(this.props.wideview, fontWeight)\n    }, messageConversation.followUp && /*#__PURE__*/React.createElement(Flag, {\n      style: styles.flag\n    }), /*#__PURE__*/React.createElement(\"span\", null, title)), /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.subject(this.props.wideview, fontColor, fontWeight)\n    }, messageConversation.subject), displayExtendedChoices && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      showTitle: false,\n      title: i18n.t('Status'),\n      color: fontColor,\n      fontWeight: fontWeight,\n      label: messageConversation.status\n    }), displayExtendedChoices && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      showTitle: false,\n      title: i18n.t('Priority'),\n      color: fontColor,\n      fontWeight: fontWeight,\n      label: messageConversation.priority\n    }), this.props.notification && this.props.wideview && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      showTitle: false,\n      title: i18n.t('Assignee'),\n      color: fontColor,\n      fontWeight: fontWeight,\n      label: messageConversation.assignee ? messageConversation.assignee.displayName : undefined\n    }), /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.dateFormat(this.props.wideview, fontColor, fontWeight)\n    }, today.diff(messageDate, 'hours') < 72 ? messageDate.from(today) : today.year() === messageDate.year() ? messageDate.format('MMM DD') : messageDate.format('ll')));\n  }\n\n}\n\nMessageConversationListItem.propTypes = {\n  attachments: propTypes.array,\n  checkedIds: propTypes.array,\n  clearAttachments: propTypes.func,\n  clearCheckedIds: propTypes.func,\n  displayExtendedChoices: propTypes.bool,\n  displayTimeDiff: propTypes.number,\n  markMessageConversations: propTypes.func,\n  messageConversation: propTypes.object,\n  messageFilter: propTypes.string,\n  notification: propTypes.bool,\n  priorityFilter: propTypes.string,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.object,\n  setChecked: propTypes.func,\n  setFilter: propTypes.func,\n  setSelectedMessageConversation: propTypes.func,\n  settingSelectedMessageConversation: propTypes.bool,\n  statusFilter: propTypes.string,\n  updateInputFields: propTypes.func,\n  wideview: propTypes.bool\n};\n\nconst mapStateToProps = state => ({\n  selectedMessageConversation: state.messaging.selectedMessageConversation,\n  settingSelectedMessageConversation: state.messaging.settingSelectedMessageConversation,\n  selectedMessageType: state.messaging.selectedMessageType,\n  checkedIds: state.messaging.checkedIds,\n  displayTimeDiff: state.messaging.displayTimeDiff,\n  messageFilter: state.messaging.messageFilter,\n  statusFilter: state.messaging.statusFilter,\n  priorityFilter: state.messaging.priorityFilter,\n  attachments: state.messaging.attachments\n});\n\nexport default compose(connect(mapStateToProps, {\n  setChecked,\n  setSelectedMessageConversation,\n  markMessageConversations,\n  clearCheckedIds,\n  setFilter,\n  updateInputFields,\n  clearAttachments\n}, null, {\n  pure: false\n}))(MessageConversationListItem);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport propTypes from '@dhis2/prop-types';\nimport CircularProgress from 'material-ui/CircularProgress';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { loadMessageConversations } from '../../actions/index.js';\nimport { messagePanelContainer } from '../../styles/style.js';\nimport theme from '../../styles/theme.js';\nimport { dedupeById, debounce } from '../../utils/helpers.js';\nimport ListItemHeader from './ListItemHeader.js';\nimport MessageConversationListItem from './MessageConversationListItem.js';\nconst NOTIFICATIONS = ['VALIDATION_RESULT', 'TICKET'];\nconst bottomEmptyHeight = 50;\nconst styles = {\n  canvas(wideview) {\n    return {\n      flex: '1 0',\n      maxWidth: wideview ? 'none' : '350px',\n      minWidth: wideview ? 'none' : '250px',\n      borderRightStyle: wideview ? '' : 'solid',\n      ...messagePanelContainer\n    };\n  },\n\n  loading: {\n    backgroundColor: theme.palette.accent2Color,\n    height: `${bottomEmptyHeight}px`,\n    transition: 'all 0.2s ease-in-out',\n    display: 'flex',\n    justifyContent: 'center'\n  }\n};\n\nclass MessageConversationList extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"onScroll\", messageType => {\n      const messageList = document.getElementById('messagelist');\n\n      if (!this.props.selectedMessageType.loading && this.isBottom(messageList) && messageType.loaded < messageType.total) {\n        this.props.loadMessageConversations(messageType, messageType.id, true);\n      }\n    });\n\n    _defineProperty(this, \"debouncedOnScroll\", debounce(this.onScroll, 150));\n\n    _defineProperty(this, \"isBottom\", el => el.scrollHeight - el.scrollTop < window.outerHeight);\n  }\n\n  render() {\n    const messages = dedupeById(this.props.messageConversations[this.props.selectedMessageType.id]);\n    const messageType = this.props.selectedMessageType ? this.props.selectedMessageType : '';\n    const selectedValue = this.props.selectedMessageConversation ? this.props.selectedMessageConversation.id : '';\n    const notification = !!(NOTIFICATIONS.indexOf(messageType.id) + 1);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: 'messagelist',\n      onScroll: () => this.debouncedOnScroll(this.props.selectedMessageType),\n      style: styles.canvas(this.props.wideview)\n    }, this.props.wideview && /*#__PURE__*/React.createElement(ListItemHeader, {\n      notification: notification,\n      displayExtendedChoices: this.props.displayExtendedChoices,\n      messages: messages\n    }), messages && messages.length !== 0 ? messages.map(child => /*#__PURE__*/React.createElement(MessageConversationListItem, {\n      key: child.id,\n      messageConversation: child,\n      wideview: this.props.wideview,\n      selectedValue: selectedValue,\n      notification: notification,\n      displayExtendedChoices: this.props.displayExtendedChoices\n    })) : !this.props.selectedMessageType.loading && /*#__PURE__*/React.createElement(Subheader, null, i18n.t(`No messages in '{{messageType}}'`, {\n      messageType: messageType.displayName\n    })), this.props.selectedMessageType.loading && /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.loading\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      style: {\n        marginTop: '10px'\n      },\n      color: theme.palette.primary1Color\n    })));\n  }\n\n}\n\nMessageConversationList.propTypes = {\n  displayExtendedChoices: propTypes.bool,\n  loadMessageConversations: propTypes.func,\n  messageConversations: propTypes.object,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.shape({\n    id: propTypes.string,\n    loading: propTypes.bool\n  }),\n  wideview: propTypes.bool\n};\n\nconst mapStateToProps = state => ({\n  messageTypes: state.messaging.messageTypes,\n  messageFilter: state.messaging.messageFilter,\n  statusFilter: state.messaging.statusFilter,\n  priorityFilter: state.messaging.priorityFilter,\n  messageConversations: state.messaging.messageConversations,\n  selectedMessageConversation: state.messaging.selectedMessageConversation,\n  selectedMessageType: state.messaging.selectedMessageType\n});\n\nexport default compose(connect(mapStateToProps, {\n  loadMessageConversations\n}, null, {\n  pure: false\n}))(MessageConversationList);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport propTypes from '@dhis2/prop-types';\nimport Badge from 'material-ui/Badge';\nimport CircularProgress from 'material-ui/CircularProgress';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport React, { Component } from 'react';\nimport theme from '../../styles/theme.js';\n\nclass MessageTypeItem extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onClick\", () => {\n      this.props.onClick();\n    });\n\n    _defineProperty(this, \"onMouseEnter\", () => {\n      this.setHoverText();\n      this.setState({\n        cursor: 'pointer'\n      });\n    });\n\n    _defineProperty(this, \"onMouseLeave\", () => {\n      this.setNeutralText();\n      this.setState({\n        cursor: 'auto'\n      });\n    });\n\n    _defineProperty(this, \"setNeutralText\", () => this.setTextColor(theme.palette.accent2Color));\n\n    _defineProperty(this, \"setHoverText\", () => this.setTextColor(theme.palette.accent3Color));\n\n    _defineProperty(this, \"setTextColor\", color => {\n      this.setState({\n        backgroundColor: color\n      });\n    });\n\n    _defineProperty(this, \"getBackgroundColor\", (selectedValue, id) => selectedValue && id === selectedValue.id ? theme.palette.accent3Color : this.state.backgroundColor);\n\n    this.state = {\n      backgroundColor: theme.palette.accent2Color,\n      textColor: theme.palette.darkGray\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      role: \"presentation\",\n      style: { ...this.state,\n        backgroundColor: this.getBackgroundColor(this.props.selectedMessageType, this.props.messageType.id),\n        cursor: this.state.cursor,\n        alignItems: 'center',\n        height: '49px',\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'space-between'\n      },\n      onMouseEnter: this.onMouseEnter,\n      onMouseLeave: this.onMouseLeave,\n      onClick: () => this.onClick()\n    }, /*#__PURE__*/React.createElement(Subheader, {\n      style: {\n        marginLeft: '5px',\n        fontSize: this.props.selectedMessageType && this.props.messageType.id === this.props.selectedMessageType.id ? '18px' : '16px',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n        color: this.props.selectedMessageType && this.props.messageType.id === this.props.selectedMessageType.id ? theme.palette.primary1Color : this.state.textColor\n      }\n    }, i18n.t(this.props.messageType.displayName)), this.props.loading ? /*#__PURE__*/React.createElement(CircularProgress, {\n      style: {\n        marginRight: '10px'\n      },\n      color: theme.palette.primary1Color,\n      size: 24\n    }) : this.props.messageType.unread > 0 && /*#__PURE__*/React.createElement(Badge, {\n      style: {\n        marginTop: '12px',\n        marginRight: '5px'\n      },\n      badgeContent: this.props.messageType.unread > 100 ? '99+' : this.props.messageType.unread,\n      secondary: true,\n      badgeStyle: {\n        backgroundColor: '#439E8E'\n      }\n    }));\n  }\n\n}\n\nMessageTypeItem.propTypes = {\n  loading: propTypes.bool,\n  messageType: propTypes.object,\n  selectedMessageType: propTypes.object,\n  onClick: propTypes.func\n};\nexport default MessageTypeItem;","import i18n from '@dhis2/d2-i18n';\nimport propTypes from '@dhis2/prop-types';\nimport Divider from 'material-ui/Divider';\nimport { List } from 'material-ui/List';\nimport Toggle from 'material-ui/Toggle';\nimport moment from 'moment';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { setSelectedMessageType, clearCheckedIds } from '../../actions/index.js';\nimport theme from '../../styles/theme.js';\nimport history from '../../utils/history.js';\nimport MessageTypeItem from './MessageTypeItem.js';\nconst styles = {\n  canvas: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n    height: 'calc(100vh - 95px)',\n    borderLeftStyle: 'solid',\n    borderLeftWidth: '0.5px',\n    borderLeftColor: theme.palette.accent4Color,\n    borderRightStyle: 'solid',\n    borderRightWidth: '1px',\n    borderRightColor: theme.palette.accent4Color,\n    overflowY: 'auto',\n    overflowX: 'hidden',\n    minWidth: '200px'\n  }\n};\n\nclass SidebarList extends Component {\n  constructor(props) {\n    super(props);\n    this.props.setSelectedMessageType(this.props.match.params.messageType);\n  }\n\n  render() {\n    const messageTypes = this.props.messageTypes;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.canvas\n    }, /*#__PURE__*/React.createElement(List, {\n      style: {\n        padding: '0px'\n      }\n    }, messageTypes && messageTypes.map(messageType => /*#__PURE__*/React.createElement(\"div\", {\n      key: messageType.id\n    }, /*#__PURE__*/React.createElement(MessageTypeItem, {\n      messageType: messageType,\n      onClick: () => {\n        this.props.setSelectedMessageType(messageType.id);\n        this.props.updateInputFields('', '', []);\n        this.props.attachments.length > 0 && this.props.clearAttachments();\n        history.push(`/${messageType.id}`);\n      },\n      selectedMessageType: this.props.selectedMessageType,\n      loading: messageType.loading\n    }), /*#__PURE__*/React.createElement(Divider, null)))), /*#__PURE__*/React.createElement(Toggle, {\n      style: {\n        width: '',\n        margin: '20px'\n      },\n      label: `${i18n.t('Auto refresh')} (${moment(this.props.refreshTimer).format('mm:ss')})`,\n      toggled: this.props.autoRefresh,\n      onToggle: () => this.props.setAutoRefresh(!this.props.autoRefresh)\n    }));\n  }\n\n}\n\nSidebarList.propTypes = {\n  attachments: propTypes.array,\n  autoRefresh: propTypes.bool,\n  clearAttachments: propTypes.func,\n  match: propTypes.object,\n  messageTypes: propTypes.array,\n  refreshTimer: propTypes.number,\n  selectedMessageType: propTypes.object,\n  setAutoRefresh: propTypes.func,\n  setSelectedMessageType: propTypes.func,\n  updateInputFields: propTypes.func\n};\n\nconst mapStateToProps = state => ({\n  selectedMessageType: state.messaging.selectedMessageType,\n  messageTypes: state.messaging.messageTypes\n});\n\nexport default compose(connect(mapStateToProps, {\n  setSelectedMessageType,\n  clearCheckedIds\n}, null, {\n  pure: false\n}))(SidebarList);","import propTypes from '@dhis2/prop-types';\nimport Clear from 'material-ui-icons/Clear';\nimport Download from 'material-ui-icons/CloudDownload';\nimport FlatButton from 'material-ui/FlatButton';\nimport LinearProgress from 'material-ui/LinearProgress';\nimport React from 'react';\nimport theme from '../../styles/theme.js';\nimport './Attachments.css';\n\nconst Attachments = ({\n  dataDirection,\n  attachments,\n  style,\n  removeAttachment,\n  downloadAttachment,\n  cancelAttachment\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: \"attachment\",\n  style: { ...style\n  }\n}, attachments.map((attachment, index) => /*#__PURE__*/React.createElement(Attachment // combining name with index prevents errors when user uploads files with duplicate names\n, {\n  key: `${attachment.name}-${index}`,\n  dataDirection: dataDirection,\n  attachment: attachment,\n  removeAttachment: removeAttachment,\n  downloadAttachment: downloadAttachment,\n  cancelAttachment: cancelAttachment\n})));\n\nAttachments.propTypes = {\n  attachments: propTypes.array,\n  cancelAttachment: propTypes.func,\n  dataDirection: propTypes.string,\n  downloadAttachment: propTypes.func,\n  removeAttachment: propTypes.func,\n  style: propTypes.object\n};\n\nconst Attachment = ({\n  dataDirection,\n  attachment,\n  removeAttachment,\n  downloadAttachment,\n  cancelAttachment\n}) => {\n  return /*#__PURE__*/React.createElement(FlatButton, {\n    className: \"attachment__button\",\n    backgroundColor: theme.palette.accent2Color,\n    label: `${attachment.name} (${parseFloat(parseInt(attachment.contentLength, 10) / 1000000).toFixed(2)} MB)`,\n    labelPosition: \"after\",\n    onClick: () => {\n      dataDirection === 'download' ? downloadAttachment(attachment) : attachment.loading ? cancelAttachment(attachment.name) : removeAttachment(attachment);\n    },\n    icon: dataDirection === 'download' ? /*#__PURE__*/React.createElement(Download, null) : /*#__PURE__*/React.createElement(Clear, null)\n  }, attachment.loading && /*#__PURE__*/React.createElement(LinearProgress, {\n    className: 'attachment__progress',\n    mode: \"indeterminate\"\n  }));\n};\n\nAttachment.propTypes = {\n  attachment: propTypes.object,\n  cancelAttachment: propTypes.func,\n  dataDirection: propTypes.string,\n  downloadAttachment: propTypes.func,\n  removeAttachment: propTypes.func\n};\nexport default Attachments;","import i18n from '@dhis2/d2-i18n';\nimport propTypes from '@dhis2/prop-types';\nimport AttachFile from 'material-ui-icons/AttachFile';\nimport FlatButton from 'material-ui/FlatButton';\nimport React from 'react';\nimport './AttachmentUploadButton.css';\n\nconst createHandleChange = addAttachment => event => {\n  const files = event.target.files;\n  const hasFile = files.length > 0;\n\n  if (hasFile) {\n    addAttachment(files[0]);\n  }\n};\n\nconst AttachmentUploadButton = ({\n  addAttachment\n}) => /*#__PURE__*/React.createElement(FlatButton, {\n  className: \"attachment__upload-button\",\n  label: i18n.t('Upload attachment'),\n  labelPosition: \"after\",\n  containerElement: \"label\",\n  icon: /*#__PURE__*/React.createElement(AttachFile, null)\n}, /*#__PURE__*/React.createElement(\"input\", {\n  className: \"attachment__upload-button--input\",\n  type: \"file\",\n  onChange: createHandleChange(addAttachment)\n}));\n\nAttachmentUploadButton.propTypes = {\n  addAttachment: propTypes.func\n};\nexport default AttachmentUploadButton;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport propTypes from '@dhis2/prop-types';\nimport { Card, CardActions, CardText } from 'material-ui/Card';\nimport FlatButton from 'material-ui/FlatButton';\nimport RadioButton from 'material-ui/RadioButton';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport TextField from 'material-ui/TextField';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { sendMessage, sendFeedbackMessage, displaySnackMessage, updateInputFields, addAttachment, removeAttachment, cancelAttachment, addRecipientByUserId } from '../../actions/index.js';\nimport { NEGATIVE } from '../../constants/development.js';\nimport { subheader } from '../../styles/style.js';\nimport { supportsAttachments } from '../../utils/helpers.js';\nimport history from '../../utils/history.js';\nimport Attachments from '../Attachments/Attachments.js';\nimport AttachmentUploadButton from '../Attachments/AttachmentUploadButton.js';\nimport SuggestionField from '../Common/SuggestionField.js';\nconst styles = {\n  canvas: {\n    flex: '3 0',\n    margin: '10px',\n    overflowY: 'scroll',\n    overflowX: 'hidden',\n    height: 'calc(100vh - 110px)'\n  },\n  messageTypeField: {\n    display: 'flex',\n    flexDirection: 'row'\n  },\n  messageType: {\n    width: '300px',\n    marginTop: '10px'\n  }\n};\n\nclass CreateMessage extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"subjectUpdate\", (event, newValue) => {\n      this.props.updateInputFields(newValue, this.props.input, this.props.recipients);\n    });\n\n    _defineProperty(this, \"inputUpdate\", (event, newValue) => {\n      this.props.updateInputFields(this.props.subject, newValue, this.props.recipients);\n    });\n\n    _defineProperty(this, \"updateRecipients\", recipients => {\n      this.props.updateInputFields(this.props.subject, this.props.input, recipients);\n    });\n\n    _defineProperty(this, \"sendMessage\", () => {\n      const messageTypeId = this.state.isMessageFeedback ? 'TICKET' : 'PRIVATE';\n      const messageType = this.props.messageTypes.find(messageType => messageType.id === messageTypeId);\n\n      if (this.state.isMessageFeedback) {\n        this.props.sendFeedbackMessage(messageType);\n        history.push('/TICKET');\n      } else {\n        const users = this.props.recipients.filter(r => r.type === 'user');\n        const userGroups = this.props.recipients.filter(r => r.type === 'userGroup');\n        const organisationUnits = this.props.recipients.filter(r => r.type === 'organisationUnit');\n        this.props.sendMessage({\n          users,\n          userGroups,\n          organisationUnits,\n          messageType\n        });\n        history.push('/PRIVATE');\n      }\n    });\n\n    _defineProperty(this, \"wipeInput\", () => {\n      this.props.updateInputFields('', '', []);\n      this.props.attachments.length > 0 && this.props.clearAttachments();\n    });\n\n    _defineProperty(this, \"handleDiscard\", () => {\n      const message = i18n.t('Message discarded');\n      const snackType = NEGATIVE;\n\n      const onSnackActionClick = () => history.push('/PRIVATE/create');\n\n      const onSnackRequestClose = () => this.wipeInput();\n\n      this.props.displaySnackMessage({\n        message,\n        onSnackActionClick,\n        onSnackRequestClose,\n        snackType\n      });\n      history.push('/PRIVATE');\n    });\n\n    this.state = {\n      isMessageFeedback: false\n    };\n  }\n\n  componentDidMount() {\n    const {\n      addRecipientByUserId\n    } = this.props;\n    const {\n      messageId,\n      recipientId\n    } = this.props.match.params; // This happens when the \"Send message\" button in the user-app is clicked\n\n    if (messageId === 'create' && recipientId) {\n      addRecipientByUserId(recipientId);\n    }\n  }\n\n  render() {\n    const disabled = this.props.subject === '' || this.props.input === '' || !this.state.isMessageFeedback && this.props.recipients.length === 0;\n    const discardDisabled = this.props.subject === '' && this.props.input === '' && !this.state.isMessageFeedback && this.props.recipients.length === 0;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.canvas\n    }, /*#__PURE__*/React.createElement(Subheader, {\n      style: subheader\n    }, \" \", i18n.t('Create')), /*#__PURE__*/React.createElement(Card, null, /*#__PURE__*/React.createElement(CardText, null, /*#__PURE__*/React.createElement(SuggestionField, {\n      style: {\n        margin: '0px'\n      },\n      label: i18n.t('To'),\n      disabled: this.state.isMessageFeedback,\n      recipients: this.state.isMessageFeedback ? [{\n        id: 'id',\n        displayName: i18n.t('Feedback recipient group')\n      }] : this.props.recipients,\n      updateRecipients: this.updateRecipients,\n      inputHeight: '100px'\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.messageTypeField\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.messageType\n    }, /*#__PURE__*/React.createElement(RadioButton, {\n      label: i18n.t('Private message'),\n      checked: !this.state.isMessageFeedback,\n      onCheck: () => {\n        this.setState({\n          isMessageFeedback: !this.state.isMessageFeedback\n        });\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.messageType\n    }, /*#__PURE__*/React.createElement(RadioButton, {\n      label: i18n.t('Feedback message'),\n      checked: this.state.isMessageFeedback,\n      onCheck: () => {\n        this.setState({\n          isMessageFeedback: !this.state.isMessageFeedback\n        });\n      }\n    }))), /*#__PURE__*/React.createElement(TextField, {\n      floatingLabelText: i18n.t('Subject'),\n      fullWidth: true,\n      value: this.props.subject,\n      onChange: this.subjectUpdate\n    }), /*#__PURE__*/React.createElement(TextField, {\n      key: 'createMessage',\n      id: 'createMessage',\n      rows: 5,\n      underlineShow: false,\n      value: this.props.input,\n      multiLine: true,\n      fullWidth: true,\n      floatingLabelText: i18n.t('Message'),\n      onChange: this.inputUpdate\n    }), this.props.enableAttachments && /*#__PURE__*/React.createElement(Attachments, {\n      dataDirection: 'upload',\n      attachments: this.props.attachments,\n      removeAttachment: attachment => this.props.removeAttachment(attachment.id),\n      cancelAttachment: this.props.cancelAttachment\n    }), /*#__PURE__*/React.createElement(CardActions, {\n      style: {\n        paddingLeft: '0px'\n      }\n    }, /*#__PURE__*/React.createElement(RaisedButton, {\n      primary: true,\n      disabled: disabled,\n      label: i18n.t('Send'),\n      onClick: () => this.sendMessage()\n    }), /*#__PURE__*/React.createElement(FlatButton, {\n      label: i18n.t('Discard'),\n      disabled: discardDisabled,\n      onClick: this.handleDiscard\n    }), this.props.enableAttachments && /*#__PURE__*/React.createElement(AttachmentUploadButton, {\n      addAttachment: attachment => {\n        this.props.addAttachment(attachment);\n      }\n    })))));\n  }\n\n}\n\nCreateMessage.propTypes = {\n  addAttachment: propTypes.func,\n  addRecipientByUserId: propTypes.func,\n  attachments: propTypes.array,\n  cancelAttachment: propTypes.func,\n  clearAttachments: propTypes.func,\n  displaySnackMessage: propTypes.func,\n  enableAttachments: propTypes.bool,\n  input: propTypes.string,\n  match: propTypes.object,\n  messageTypes: propTypes.array,\n  recipients: propTypes.array,\n  removeAttachment: propTypes.func,\n  sendFeedbackMessage: propTypes.func,\n  sendMessage: propTypes.func,\n  subject: propTypes.string,\n  updateInputFields: propTypes.func\n};\n\nconst mapStateToProps = state => ({\n  messageTypes: state.messaging.messageTypes,\n  subject: state.messaging.subject,\n  input: state.messaging.input,\n  recipients: state.messaging.recipients,\n  attachments: state.messaging.attachments,\n  enableAttachments: supportsAttachments(state.messaging.dhis2CoreVersion)\n});\n\nexport default compose(connect(mapStateToProps, {\n  sendMessage,\n  sendFeedbackMessage,\n  displaySnackMessage,\n  updateInputFields,\n  addAttachment,\n  removeAttachment,\n  cancelAttachment,\n  addRecipientByUserId\n}, null, {\n  pure: false\n}))(CreateMessage);","import { fontFamily } from '../constants/development.js';\nimport theme from '../styles/theme.js';\nexport const styles = {\n  canvas: {\n    flex: '3 0',\n    overflowY: 'scroll',\n    overflowX: 'hidden',\n    height: 'calc(100vh - 110px)',\n    paddingTop: '10px'\n  },\n  innerCanvas: {\n    display: 'flex',\n    flexDirection: 'column',\n    margin: '0px 10px 0px 10px'\n  },\n  header: {\n    display: 'flex'\n  },\n  iconButton: {\n    display: 'flex',\n    alignSelf: 'center'\n  },\n  subjectSubheader: {\n    display: 'flex',\n    alignSelf: 'center',\n    fontSize: '20px',\n    fontFamily\n  },\n  participantsCanvas: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  participants: {\n    paddingLeft: '12px',\n    paddingTop: '10px',\n    display: 'flex',\n    flexWrap: 'wrap'\n  },\n  chip: {\n    height: '32px',\n    marginRight: '3px',\n    marginBottom: '3px'\n  },\n  participantAddRow: {\n    display: 'flex'\n  },\n  participantsSuggestionField: {\n    paddingLeft: '12px',\n    marginBottom: '0px',\n    flex: 1\n  },\n  participantsAdd: {\n    alignSelf: 'flex-end',\n    marginBottom: '28px',\n    paddingLeft: '12px'\n  },\n  messagesCanvas: {\n    marginBottom: '50px',\n    display: 'flex',\n    flexDirection: 'column',\n    backgroundColor: theme.palette.accent2Color,\n    margin: '0px 10px 10px 10px'\n  },\n  messagesInnerCanvas: {\n    padding: '0px'\n  }\n};\nexport default styles;","import i18n from '@dhis2/d2-i18n';\nimport propTypes from '@dhis2/prop-types';\nimport CardText from 'material-ui/Card/CardText';\nimport Divider from 'material-ui/Divider';\nimport moment from 'moment';\nimport React from 'react';\nimport Linkify from 'react-linkify';\nimport { fontFamily } from '../../constants/development.js';\nimport theme from '../../styles/theme.js';\nimport Attachments from '../Attachments/Attachments.js';\nconst styles = {\n  canvas(backgroundColor) {\n    return {\n      backgroundColor,\n      padding: '16px 16px 16px 16px'\n    };\n  },\n\n  innerCanvas: {\n    margin: '',\n    paddingBottom: '0px'\n  },\n  cardText: {\n    padding: '16px 0px 16px 0px',\n    fontFamily,\n    whiteSpace: 'pre-wrap',\n    wordBreak: 'break-word'\n  },\n  fromFormat: {\n    fontFamily\n  },\n  datePlacement: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    marginRight: '10px'\n  },\n  dateFormat: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    fontFamily\n  }\n};\n\nconst Message = ({\n  displayTimeDiff,\n  message,\n  currentUser,\n  lastMessage,\n  downloadAttachment,\n  cancelAttachment,\n  enableAttachments\n}) => {\n  const fromTitle = message.sender ? currentUser && currentUser.id === message.sender.id ? 'me' : message.sender.displayName : 'system';\n  const today = moment();\n  const messageDate = moment(message.created).add(displayTimeDiff);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.canvas(theme.palette.canvasColor)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.innerCanvas\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.fromFormat\n  }, message.internal ? i18n.t(`Internal message from ${fromTitle}`) : i18n.t(`Message from ${fromTitle}`)), /*#__PURE__*/React.createElement(\"div\", {\n    placement: 'bottom',\n    style: styles.datePlacement\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.dateFormat\n  }, today.diff(messageDate, 'hours') < 72 ? `${messageDate.from(today)}, ${messageDate.format('HH:mm')}` : today.year() === messageDate.year() ? messageDate.format('MMM DD, HH:mm') : messageDate.format('MMM DD, YYYY HH:mm'))), enableAttachments && /*#__PURE__*/React.createElement(Attachments, {\n    dataDirection: 'download',\n    style: {\n      paddingLeft: 0\n    },\n    attachments: message.attachments,\n    downloadAttachment: downloadAttachment,\n    cancelAttachment: cancelAttachment\n  }), /*#__PURE__*/React.createElement(CardText, {\n    style: styles.cardText\n  }, /*#__PURE__*/React.createElement(Linkify, null, message.text))), !lastMessage && /*#__PURE__*/React.createElement(Divider, null));\n};\n\nMessage.propTypes = {\n  cancelAttachment: propTypes.func,\n  currentUser: propTypes.object,\n  displayTimeDiff: propTypes.number,\n  downloadAttachment: propTypes.func,\n  enableAttachments: propTypes.bool,\n  lastMessage: propTypes.bool,\n  message: propTypes.object\n};\nexport default Message;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport propTypes from '@dhis2/prop-types';\nimport { Card, CardActions, CardText } from 'material-ui/Card';\nimport FlatButton from 'material-ui/FlatButton';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport TextField from 'material-ui/TextField';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { replyMessage, setSelectedMessageType, updateInputFields, displaySnackMessage, addAttachment, removeAttachment, cancelAttachment } from '../../actions/index.js';\nimport { NEGATIVE } from '../../constants/development.js';\nimport { supportsAttachments } from '../../utils/helpers.js';\nimport Attachments from '../Attachments/Attachments.js';\nimport AttachmentUploadButton from '../Attachments/AttachmentUploadButton.js';\n\nclass ReplyCard extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"replyMessage\", internalReply => {\n      const {\n        input: message,\n        selectedMessageConversation: messageConversation,\n        selectedMessageType: messageType\n      } = this.props;\n      this.props.replyMessage({\n        message,\n        internalReply,\n        messageConversation,\n        messageType\n      });\n      this.wipeInput();\n    });\n\n    _defineProperty(this, \"wipeInput\", () => {\n      this.props.updateInputFields('', '', []);\n      this.props.attachments.length > 0 && this.props.clearAttachments();\n      this.setState({\n        inputError: false\n      });\n    });\n\n    _defineProperty(this, \"texFieldUpdate\", (event, newValue) => {\n      this.props.updateInputFields('', newValue, []);\n    });\n\n    _defineProperty(this, \"handleDiscard\", () => {\n      const message = i18n.t('Reply discarded');\n      const snackType = NEGATIVE;\n\n      const onSnackActionClick = () => this.setState({\n        discardState: false\n      });\n\n      const onSnackRequestClose = () => {\n        this.setState({\n          discardState: false\n        });\n        this.wipeInput();\n      };\n\n      this.setState({\n        discardState: true\n      });\n      this.props.displaySnackMessage({\n        message,\n        onSnackActionClick,\n        onSnackRequestClose,\n        snackType\n      });\n      this.setState({\n        expanded: false\n      });\n    });\n\n    this.state = {\n      discardState: false\n    };\n  }\n\n  componentWillUnmount() {\n    this.wipeInput();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Card, {\n      style: {\n        marginTop: '5px'\n      },\n      expanded: true\n    }, /*#__PURE__*/React.createElement(CardText, {\n      style: {\n        padding: '0px 0px 0px 16px'\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      key: this.props.messageConversation.id,\n      id: this.props.messageConversation.id,\n      rows: 5,\n      underlineShow: false,\n      value: this.state.discardState ? '' : this.props.input,\n      multiLine: true,\n      fullWidth: true,\n      floatingLabelText: i18n.t('Message'),\n      onChange: this.texFieldUpdate\n    }), this.props.enableAttachments && !this.state.discardState && /*#__PURE__*/React.createElement(Attachments, {\n      dataDirection: 'upload',\n      attachments: this.props.attachments,\n      removeAttachment: attachment => this.props.removeAttachment(attachment.id),\n      cancelAttachment: this.props.cancelAttachment\n    }), /*#__PURE__*/React.createElement(CardActions, {\n      style: {\n        paddingLeft: '0px'\n      }\n    }, /*#__PURE__*/React.createElement(RaisedButton, {\n      primary: true,\n      label: i18n.t('Reply'),\n      disabled: this.props.input === '' || this.state.discardState,\n      onClick: () => this.replyMessage(false)\n    }), this.props.isInFeedbackRecipientGroup && this.props.selectedMessageType.id === 'TICKET' && /*#__PURE__*/React.createElement(FlatButton, {\n      primary: true,\n      label: i18n.t('Internal reply'),\n      disabled: this.props.input === '' || this.state.discardState,\n      onClick: () => this.replyMessage(true)\n    }), /*#__PURE__*/React.createElement(FlatButton, {\n      label: i18n.t('Discard'),\n      disabled: this.props.input === '' || this.state.discardState,\n      onClick: this.handleDiscard\n    }), this.props.enableAttachments && /*#__PURE__*/React.createElement(AttachmentUploadButton, {\n      addAttachment: attachment => {\n        this.props.addAttachment(attachment);\n      }\n    }), \")\")));\n  }\n\n}\n\nReplyCard.propTypes = {\n  addAttachment: propTypes.func,\n  attachments: propTypes.array,\n  cancelAttachment: propTypes.func,\n  clearAttachments: propTypes.func,\n  displaySnackMessage: propTypes.func,\n  enableAttachments: propTypes.bool,\n  input: propTypes.string,\n  isInFeedbackRecipientGroup: propTypes.bool,\n  messageConversation: propTypes.object,\n  removeAttachment: propTypes.func,\n  replyMessage: propTypes.func,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.object,\n  updateInputFields: propTypes.func\n};\n\nconst mapStateToProps = state => ({\n  selectedMessageConversation: state.messaging.selectedMessageConversation,\n  selectedMessageType: state.messaging.selectedMessageType,\n  messageTypes: state.messaging.messageTypes,\n  input: state.messaging.input,\n  isInFeedbackRecipientGroup: state.messaging.isInFeedbackRecipientGroup,\n  attachments: state.messaging.attachments,\n  enableAttachments: supportsAttachments(state.messaging.dhis2CoreVersion)\n});\n\nexport default compose(connect(mapStateToProps, {\n  replyMessage,\n  setSelectedMessageType,\n  updateInputFields,\n  displaySnackMessage,\n  addAttachment,\n  removeAttachment,\n  cancelAttachment\n}, null, {\n  pure: false\n}))(ReplyCard);","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport propTypes from '@dhis2/prop-types';\nimport AddIcon from 'material-ui-icons/Add';\nimport NavigationBack from 'material-ui-icons/ArrowBack';\nimport Chip from 'material-ui/Chip';\nimport FlatButton from 'material-ui/FlatButton';\nimport IconButton from 'material-ui/IconButton';\nimport Paper from 'material-ui/Paper';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { addRecipients, downloadAttachment, cancelAttachment, clearSelectedMessageConversation } from '../../actions/index.js';\nimport { styles } from '../../styles/messageConversationStyles.js';\nimport theme from '../../styles/theme.js';\nimport { supportsAttachments } from '../../utils/helpers.js';\nimport history from '../../utils/history.js';\nimport ExtendedChoiceLabel from '../Common/ExtendedChoiceLabel.js';\nimport SuggestionField from '../Common/SuggestionField.js';\nimport Message from './Message.js';\nimport ReplyCard from './ReplyCard.js';\nconst NOTIFICATIONS = ['TICKET', 'VALIDATION_RESULT'];\nconst maxParticipantsDisplay = 30;\n\nclass MessageConversation extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"backToList\", () => {\n      const {\n        clearSelectedMessageConversation,\n        messageConversation\n      } = this.props;\n      history.push(`/${messageConversation.messageType}`);\n      clearSelectedMessageConversation();\n    });\n\n    _defineProperty(this, \"addRecipients\", () => {\n      const users = this.state.recipients.filter(r => r.type === 'user');\n      const userGroups = this.state.recipients.filter(r => r.type === 'userGroup');\n      const organisationUnits = this.state.recipients.filter(r => r.type === 'organisationUnit');\n      const {\n        messageConversation,\n        selectedMessageType: messageType\n      } = this.props;\n      this.props.addRecipients({\n        users,\n        userGroups,\n        organisationUnits,\n        messageConversation,\n        messageType\n      });\n      this.setState({\n        recipients: []\n      });\n    });\n\n    _defineProperty(this, \"updateRecipients\", recipients => {\n      this.setState({\n        recipients\n      });\n    });\n\n    this.state = {\n      recipients: [],\n      cursor: 'auto'\n    };\n  }\n\n  render() {\n    const {\n      messageConversation,\n      currentUser\n    } = this.props;\n    const messages = messageConversation.messages;\n    const notification = !!(NOTIFICATIONS.indexOf(messageConversation.messageType) + 1);\n    const participants = messageConversation.userMessages.slice(0, maxParticipantsDisplay).map(userMessage => !currentUser.id || this.state.recipientsExpanded || currentUser.id !== userMessage.user.id ? userMessage.user.displayName : i18n.t('me'));\n    const userMessagesLength = messageConversation.userMessages.length;\n\n    if (userMessagesLength > maxParticipantsDisplay) {\n      participants.push(' + '.concat(userMessagesLength - maxParticipantsDisplay));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"messageconversation\",\n      style: styles.canvas\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.innerCanvas\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.header\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      style: styles.iconButton,\n      tooltipPosition: \"bottom-right\",\n      onClick: this.backToList,\n      tooltip: i18n.t('Show all messages')\n    }, /*#__PURE__*/React.createElement(NavigationBack, null)), /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.subjectSubheader\n    }, messageConversation.subject), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      color: theme.palette.darkGray,\n      showTitle: true,\n      title: i18n.t('Status'),\n      label: messageConversation.status\n    }), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      color: theme.palette.darkGray,\n      showTitle: true,\n      title: i18n.t('Priority'),\n      label: messageConversation.priority\n    }), notification && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      color: theme.palette.darkGray,\n      showTitle: true,\n      title: i18n.t('Assignee'),\n      label: messageConversation.assignee ? messageConversation.assignee.displayName : undefined\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.participantsCanvas\n    }, /*#__PURE__*/React.createElement(Subheader, {\n      style: {\n        paddingLeft: '12px',\n        paddingTop: '10px'\n      }\n    }, i18n.t('Participants')), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.participants\n    }, participants.map(participant => /*#__PURE__*/React.createElement(Chip, {\n      key: participant,\n      style: styles.chip\n    }, participant)))), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.participantAddRow\n    }, /*#__PURE__*/React.createElement(SuggestionField, {\n      style: styles.participantsSuggestionField,\n      label: i18n.t('Add participants to conversation'),\n      messageConversation: messageConversation,\n      recipients: this.state.recipients,\n      updateRecipients: this.updateRecipients,\n      limitSearchArray: messageConversation.userMessages\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.participantsAdd\n    }, /*#__PURE__*/React.createElement(FlatButton, {\n      icon: /*#__PURE__*/React.createElement(AddIcon, null),\n      onClick: () => this.addRecipients(),\n      label: i18n.t('Add')\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.messagesCanvas\n    }, /*#__PURE__*/React.createElement(Paper, {\n      style: styles.messagesInnerCanvas\n    }, messages.map((message, i) => /*#__PURE__*/React.createElement(Message, {\n      key: message.id,\n      displayTimeDiff: this.props.displayTimeDiff,\n      message: message,\n      messageConversation: messageConversation,\n      notification: notification,\n      currentUser: this.state.currentUser,\n      lastMessage: i + 1 === messages.length,\n      downloadAttachment: attachment => this.props.downloadAttachment(messageConversation.id, message.id, attachment.id),\n      cancelAttachment: this.props.cancelAttachment,\n      enableAttachments: this.props.enableAttachments\n    }))), /*#__PURE__*/React.createElement(ReplyCard, _extends({}, this.props, {\n      messageConversation: messageConversation\n    }))));\n  }\n\n}\n\nMessageConversation.propTypes = {\n  addRecipients: propTypes.func,\n  cancelAttachment: propTypes.func,\n  clearSelectedMessageConversation: propTypes.func,\n  currentUser: propTypes.object,\n  displayExtendedChoices: propTypes.bool,\n  displayTimeDiff: propTypes.number,\n  downloadAttachment: propTypes.func,\n  enableAttachments: propTypes.bool,\n  messageConversation: propTypes.object,\n  selectedMessageType: propTypes.object\n};\n\nconst mapStateToProps = state => ({\n  currentUser: state.messaging.currentUser,\n  selectedMessageType: state.messaging.selectedMessageType,\n  displayTimeDiff: state.messaging.displayTimeDiff,\n  enableAttachments: supportsAttachments(state.messaging.dhis2CoreVersion)\n});\n\nexport default connect(mapStateToProps, {\n  addRecipients,\n  downloadAttachment,\n  cancelAttachment,\n  clearSelectedMessageConversation\n})(MessageConversation);","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport propTypes from '@dhis2/prop-types';\nimport MailIcon from 'material-ui-icons/MailOutline';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { loadMessageConversations, setIsInFeedbackRecipientGroup, clearCheckedIds, setSelectedMessageConversation, setSelectedMessageType, clearSelectedMessageConversation, updateInputFields, setFilter, setDisplayTimeDiff, clearAttachments } from '../../actions/index.js';\nimport * as api from '../../api/api.js';\nimport { subheader } from '../../styles/style.js';\nimport theme from '../../styles/theme.js';\nimport Toolbar from '../Common/Toolbar.js';\nimport MessageConversationList from '../List/MessageConversationList.js';\nimport SidebarList from '../List/SidebarList.js';\nimport CreateMessage from '../MessageConversation/CreateMessage.js';\nimport MessageConversation from '../MessageConversation/MessageConversation.js';\nimport './MessagingCenter.css';\nconst EXTENDED_CHOICES = ['TICKET', 'VALIDATION_RESULT'];\nconst refreshTimerTotal = 300000; // 5 minutes\n\nconst refreshTimerInterval = 10000; // 10 seconds\n\nclass MessagingCenter extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"setAutoRefresh\", autoRefresh => {\n      // Cancel existing interval if it shouldn't autorefresh\n      if (!autoRefresh && this.intervalId) {\n        clearInterval(this.intervalId);\n        this.intervalId = null;\n      }\n\n      if (autoRefresh) {\n        this.intervalId = setInterval(this.tick, refreshTimerInterval);\n      }\n\n      this.setState({\n        autoRefresh,\n        refreshTimer: refreshTimerTotal\n      });\n    });\n\n    _defineProperty(this, \"tick\", () => {\n      const timerHasElapsed = this.state.refreshTimer - refreshTimerInterval <= 0;\n\n      if (timerHasElapsed) {\n        this.refresh();\n        this.setState({\n          refreshTimer: refreshTimerTotal\n        });\n      } else {\n        this.setState(prevState => ({\n          refreshTimer: prevState.refreshTimer - refreshTimerInterval\n        }));\n      }\n    });\n\n    _defineProperty(this, \"refresh\", () => {\n      this.props.messageTypes.map(messageType => this.props.loadMessageConversations(messageType, this.props.selectedMessageType));\n\n      if (this.props.selectedMessageConversation) {\n        this.props.setSelectedMessageConversation(this.props.selectedMessageConversation);\n      }\n    });\n\n    _defineProperty(this, \"toogleWideview\", () => {\n      this.setState({\n        wideview: !this.state.wideview\n      });\n    });\n\n    this.intervalId = null;\n    this.state = {\n      autoRefresh: false,\n      checkedItems: false,\n      refreshTimer: refreshTimerTotal,\n      wideview: true\n    };\n  }\n\n  componentDidMount() {\n    const selectedMessageType = this.props.match.params.messageType;\n    const selectedId = this.props.match.params.messageId;\n\n    if (selectedId && selectedId !== selectedMessageType && selectedId !== 'create') {\n      const initialMessageConversation = {\n        id: selectedId\n      };\n      this.props.setSelectedMessageConversation(initialMessageConversation);\n    }\n\n    api.isInFeedbackRecipientGroup(this.props.currentUser).then(result => this.props.setIsInFeedbackRecipientGroup(result));\n    this.props.messageTypes.map(messageType => this.props.loadMessageConversations(messageType, selectedMessageType));\n    this.props.setDisplayTimeDiff();\n  }\n\n  componentDidUpdate() {\n    const selectedMessageType = this.props.match.params.messageType;\n    const selectedId = this.props.match.params.messageId;\n\n    if (!this.props.settingSelectedMessageConversation && selectedId && selectedMessageType !== selectedId && selectedId !== 'create' && (this.props.selectedMessageConversation === undefined || selectedId !== this.props.selectedMessageConversation.id)) {\n      const initialMessageConversation = {\n        id: selectedId\n      };\n      this.props.setSelectedMessageConversation(initialMessageConversation);\n    }\n\n    if (selectedMessageType === selectedId && selectedMessageType !== this.props.selectedMessageType.id) {\n      this.props.setSelectedMessageType(selectedMessageType);\n    }\n\n    if ((selectedMessageType === selectedId || selectedId === 'create') && this.props.selectedMessageConversation !== undefined) {\n      this.props.clearSelectedMessageConversation();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.intervalId) {\n      clearInterval(this.intervalId);\n    }\n  }\n\n  render() {\n    const id = this.props.match.params.messageId;\n    const displayExtendedChoices = (this.props.selectedMessageType ? !!(EXTENDED_CHOICES.indexOf(this.props.selectedMessageType.id) + 1) : false) && this.props.isInFeedbackRecipientGroup;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"messaging-center\"\n    }, /*#__PURE__*/React.createElement(Toolbar, _extends({}, this.props, {\n      id: id,\n      wideview: this.state.wideview,\n      displayExtendedChoices: displayExtendedChoices,\n      toogleWideview: this.toogleWideview\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"messaging-center__main-content\"\n    }, /*#__PURE__*/React.createElement(SidebarList, _extends({}, this.props, {\n      drawerOpen: this.state.drawerOpen,\n      messageTypes: this.props.messageTypes,\n      autoRefresh: this.state.autoRefresh,\n      refreshTimer: this.state.refreshTimer,\n      setAutoRefresh: this.setAutoRefresh\n    })), this.props.selectedMessageConversation === undefined && !(this.state.wideview && id === 'create') && /*#__PURE__*/React.createElement(MessageConversationList, {\n      wideview: this.state.wideview,\n      displayExtendedChoices: displayExtendedChoices && this.state.wideview\n    }), id === 'create' && /*#__PURE__*/React.createElement(CreateMessage, _extends({}, this.props, {\n      wideview: this.state.wideview\n    })), this.props.selectedMessageConversation !== undefined && !this.state.wideview && /*#__PURE__*/React.createElement(MessageConversationList, {\n      wideview: this.state.wideview,\n      displayExtendedChoices: displayExtendedChoices && this.state.wideview\n    }), this.props.selectedMessageConversation && id !== 'create' ? this.props.selectedMessageConversation !== undefined && /*#__PURE__*/React.createElement(MessageConversation, _extends({}, this.props, {\n      messageConversation: this.props.selectedMessageConversation,\n      wideview: this.state.wideview,\n      disableLink: true,\n      displayExtendedChoices: displayExtendedChoices\n    })) : !this.state.wideview && id !== 'create' && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"messaging-center__no-message-selected\"\n    }, /*#__PURE__*/React.createElement(Subheader, {\n      style: subheader\n    }, i18n.t('Select a message')), /*#__PURE__*/React.createElement(MailIcon, {\n      style: {\n        color: theme.palette.primary1Color,\n        width: 120,\n        height: 120\n      }\n    }))));\n  }\n\n}\n\nMessagingCenter.propTypes = {\n  clearSelectedMessageConversation: propTypes.func,\n  currentUser: propTypes.object,\n  isInFeedbackRecipientGroup: propTypes.bool,\n  loadMessageConversations: propTypes.func,\n  match: propTypes.object,\n  messageTypes: propTypes.array,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.object,\n  setDisplayTimeDiff: propTypes.func,\n  setIsInFeedbackRecipientGroup: propTypes.func,\n  setSelectedMessageConversation: propTypes.func,\n  setSelectedMessageType: propTypes.func,\n  settingSelectedMessageConversation: propTypes.bool\n};\n\nconst mapStateToProps = state => ({\n  currentUser: state.messaging.currentUser,\n  snackMessage: state.messaging.snackMessage,\n  messageTypes: state.messaging.messageTypes,\n  messageConversations: state.messaging.messageConversations,\n  messageFilter: state.messaging.messageFilter,\n  statusFilter: state.messaging.statusFilter,\n  priorityFilter: state.messaging.priorityFilter,\n  assignedToMeFilter: state.messaging.assignedToMeFilter,\n  markedForFollowUpFilter: state.messaging.markedForFollowUpFilter,\n  unreadFilter: state.messaging.unreadFilter,\n  selectedMessageType: state.messaging.selectedMessageType,\n  selectedMessageConversation: state.messaging.selectedMessageConversation,\n  settingSelectedMessageConversation: state.messaging.settingSelectedMessageConversation,\n  checkedIds: state.messaging.checkedIds,\n  checkedOptions: state.messaging.checkedIds.length > 0,\n  loaded: state.messaging.loaded,\n  isInFeedbackRecipientGroup: state.messaging.isInFeedbackRecipientGroup,\n  attachments: state.messaging.attachments\n});\n\nexport default compose(connect(mapStateToProps, {\n  loadMessageConversations,\n  setIsInFeedbackRecipientGroup,\n  clearCheckedIds,\n  setSelectedMessageConversation,\n  setSelectedMessageType,\n  clearSelectedMessageConversation,\n  updateInputFields,\n  setFilter,\n  setDisplayTimeDiff,\n  clearAttachments\n}, null, {\n  pure: false\n}))(MessagingCenter);","import React from 'react';\nimport { Redirect } from 'react-router';\nimport { Router, Route } from 'react-router-dom';\nimport history from '../../utils/history.js';\nimport MessagingCenter from '../MessagingCenter/MessagingCenter.js';\n\nconst Routes = () => /*#__PURE__*/React.createElement(Router, {\n  history: history\n}, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Route, {\n  exact: true,\n  path: \"/\",\n  component: () => /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/PRIVATE\"\n  })\n}), /*#__PURE__*/React.createElement(Route, {\n  path: \"/:messageType/:messageId?/:recipientId?\",\n  component: MessagingCenter\n})));\n\nexport default Routes;","import { useConfig } from '@dhis2/app-runtime';\nimport propTypes from '@dhis2/prop-types';\nimport cx from 'classnames';\nimport { CircularProgress } from 'material-ui';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport '../../locales/index.js';\nimport { setCurrentUser, setDhis2CoreVersion } from '../../actions/index.js';\nimport CustomSnackBar from '../Common/CustomSnackBar.js';\nimport classes from './App.module.css';\nimport Routes from './Routes.js';\n\nconst App = ({\n  currentUser,\n  setCurrentUser,\n  setDhis2CoreVersion\n}) => {\n  const {\n    loading,\n    error\n  } = currentUser;\n  const {\n    serverVersion\n  } = useConfig();\n  useEffect(() => {\n    setDhis2CoreVersion(serverVersion.minor);\n    setCurrentUser();\n  }, []);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.center\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      size: 48\n    }));\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(classes.center, classes.error)\n    }, error);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(CustomSnackBar, null), /*#__PURE__*/React.createElement(Routes, null));\n};\n\nApp.propTypes = {\n  currentUser: propTypes.object.isRequired,\n  setCurrentUser: propTypes.func.isRequired,\n  setDhis2CoreVersion: propTypes.func.isRequired\n};\nexport default connect(state => ({\n  currentUser: state.messaging.currentUser\n}), {\n  setCurrentUser,\n  setDhis2CoreVersion\n})(App);","import { useDataEngine } from '@dhis2/app-runtime';\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\nimport React from 'react';\nimport { Provider } from 'react-redux';\nimport { setEngine } from '../../api/api.js';\nimport store from '../../store.js';\nimport theme from '../../styles/theme.js';\nimport App from './App.js';\nimport '../../index.css';\nimport 'typeface-roboto';\n\nconst AppWrapper = () => {\n  const engine = useDataEngine();\n  setEngine(engine);\n  return /*#__PURE__*/React.createElement(Provider, {\n    store: store\n  }, /*#__PURE__*/React.createElement(MuiThemeProvider, {\n    muiTheme: theme\n  }, /*#__PURE__*/React.createElement(App, null)));\n};\n\nexport default AppWrapper;"],"sourceRoot":""}